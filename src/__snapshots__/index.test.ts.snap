// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`inlineChangesHighlighted commit with a file move 1`] = `
"                                                                                                                        
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sat Apr 10 22:26:15 2021 -0700                                                                                  
                                                                                                                        
    Move sample diff files                                                                                              
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                                                                
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`inlineChangesHighlighted commit with a new binary file 1`] = `
"                                                                                                                        
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                                                          
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Wed Apr 14 18:24:29 2021 -0700                                                                                  
                                                                                                                        
    test binary file addition                                                                                           
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                                                              
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`inlineChangesHighlighted commit with a new file 1`] = `
"                                                                                                                        
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sat Apr 10 14:35:42 2021 -0700                                                                                  
                                                                                                                        
    wip                                                                                                                 
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                                                          
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                                                         
                                                                1 + node_modules/**                                     
                                                                2 + build/**                                            
                                                                3   No newline at end of file                           
"
`;

exports[`inlineChangesHighlighted commit with a small diff 1`] = `
"                                                                                                                        
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                                                         
Author: Shrey Banga <shrey@quip.com>                                                                                    
Date:   Tue May 23 16:47:17 2017 -0700                                                                                  
                                                                                                                        
    sonos to brew                                                                                                       
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                                                            
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                                                        
   19   brew 'socat'                                           19   brew 'socat'                                        
                                                               20 + brew 'sonos'                                        
   20   brew 'terminal-notifier'                               21   brew 'terminal-notifier'                            
@@ -42,3 +43,2 @@ cask 'rescuetime'                                                                                     
   42   cask 'slate'                                           43   cask 'slate'                                        
   43 - cask 'sonos'                                                                                                    
   44   cask 'spotify'                                         44   cask 'spotify'                                      
"
`;

exports[`inlineChangesHighlighted commit with addition 1`] = `
"                                                                                                                        
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 15:25:34 2021 -0700                                                                                  
                                                                                                                        
    Add theme support                                                                                                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                                                         
    9   -   [x] Organize code                                   9   -   [x] Organize code                               
                                                               10 + -   [x] Move visual config to theme                 
   10   -   [ ] Handle empty diffs                             11   -   [ ] Handle empty diffs                          
   11                                                          12                                                       
"
`;

exports[`inlineChangesHighlighted commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   \\"search.location\\": \\"panel\\",
-  \\"search.usePCRE2\\": true,

   // telemetry
"
`;

exports[`inlineChangesHighlighted commit with inline line changes 1`] = `
"                                                                                                                        
commit 9e424d329800e945e3003c9e275f80bdef69e591                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 4 19:04:26 2021 -0700                                                                                   
                                                                                                                        
    update lockfile                                                                                                     
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                                                                  
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                                                             
    5 -         \\"revision\\": ░░░░                                5 +         \\"revision\\": ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
@@ -8 +8 @@                                                                                                             
    8 -         \\"revision\\": ░░░░                                8 +         \\"revision\\": ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
@@ -11 +11 @@                                                                                                           
   11 -         \\"revision\\": ░░░░                               11 +         \\"revision\\": ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
@@ -16 +16 @@                                                                                                           
   16 -         \\"version\\": \\"1.░░.░░░\\",                         16 +         \\"version\\": \\"1.▓▓.▓\\",                        
@@ -17,0 +18 @@                                                                                                         
                                                               18 +           \\"rebuild\\": 0,                             
@@ -19,0 +21 @@                                                                                                         
                                                               21 +           \\"root_url\\": \\"https://homebrew.bintray.com/
@@ -20,0 +23,8 @@                                                                                                       
                                                               23 +             \\"arm64_big_sur\\": {                      
                                                               24 +               \\"url\\": \\"https://homebrew.bintray.com/b
                                                               25 +               \\"sha256\\": \\"e7c1efdd09e951eb46d01a3200b
                                                               26 +             },                                      
                                                               27 +             \\"big_sur\\": {                            
                                                               28 +               \\"url\\": \\"https://homebrew.bintray.com/b
                                                               29 +               \\"sha256\\": \\"ea37f33fd27369612a3e4e6db6a
                                                               30 +             },                                      
@@ -22,2 +32,2 @@                                                                                                       
   22 -               \\"url\\": \\"https://homebrew.bintray.com/b   32 +               \\"url\\": \\"https://homebrew.bintray.com/b
   23 -               \\"sha256\\": \\"░░░░░░░░░░░░░░░░░░░░░░░░░░░   33 +               \\"sha256\\": \\"▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
@@ -26,6 +36,2 @@                                                                                                       
   26 -               \\"url\\": \\"https://homebrew.bintray.com/b   36 +               \\"url\\": \\"https://homebrew.bintray.com/b
   27 -               \\"sha256\\": \\"░░░░░░░░░░░░░░░░░░░░░░░░░░░   37 +               \\"sha256\\": \\"▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
   28 -             },                                                                                                  
   29 -             \\"high_sierra\\": {                                                                                    
   30 -               \\"url\\": \\"https://homebrew.bintray.com/b                                                            
   31 -               \\"sha256\\": \\"0997f6f5cda0e3bdb7789a80b53                                                            
   32                                                          38                                                       
"
`;

exports[`inlineChangesHighlighted commits without diffs 1`] = `
"                                                                                                                        
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                                                          
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 16:23:54 2021 -0700                                                                                  
                                                                                                                        
    Small refactor to allow testing end-to-end                                                                          
                                                                                                                        
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 11:53:02 2021 -0700                                                                                  
                                                                                                                        
    Organize code                                                                                                       
                                                                                                                        
commit f323143e03af95fee5d38c21238a92ffd4461847                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 10:39:17 2021 -0700                                                                                  
                                                                                                                        
    more todos                                                                                                          
                                                                                                                        
"
`;

exports[`inlineChangesHighlighted empty 1`] = `
"                                                                                                                        
"
`;

exports[`inlineChangesHighlighted multiple inserts and deletes in the same hunk 1`] = `
"                                                                                                                        
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 16:23:54 2021 -0700                                                                                  
                                                                                                                        
    Small refactor to allow testing end-to-end                                                                          
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                                                         
    1   import chalk from 'chalk';                              1   import chalk from 'chalk';                          
    2   import * as process from 'process';                     2   import * as process from 'process';                 
                                                                3 + import stream from 'stream';                        
    3   import terminalSize from 'term-size';                   4   import terminalSize from 'term-size';               
    4   import { iterlinesFromReadableAsync } from './iterLi    5   import { iterlinesFromReadableAsync } from './iterLi
    5   import { iterLinesWithoutAnsiColors } from './iterLi    6   import { iterLinesWithoutAnsiColors } from './iterLi
@@ -12,15 +13,16 @@ function main() {                                                                                   
   12       const screenWidth = terminalSize().columns;        13       const screenWidth = terminalSize().columns;     
   13       const theme = defaultTheme(chalk, screenWidth);    14       const theme = defaultTheme(chalk, screenWidth); 
   14                                                          15                                                       
   15 -     transformStreamWithIterables(                      16 +     stream.pipeline(                                
   16 -         process.stdin,                                 17 +         transformStreamWithIterables(               
   17 -         [                                              18 +             process.stdin,                          
   18               iterlinesFromReadableAsync,                19               iterlinesFromReadableAsync,             
   19               iterLinesWithoutAnsiColors,                20               iterLinesWithoutAnsiColors,             
   20               iterSideBySideDiff(theme),                 21               iterSideBySideDiff(theme),              
   21 -             iterWithNewlines░                          22 +             iterWithNewlines                        
   22 -         ░,                                             23 +         ▓,                                          
   23 -         process.stdout                                 24 +         process.stdout▓                             
                                                               25 +         console.error                               
   24       );                                                 26       );                                              
   25   }                                                      27   }                                                   
   26                                                          28                                                       
"
`;

exports[`inlineChangesHighlighted with ANSI color codes 1`] = `
"                                                                                                                        
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 15:25:34 2021 -0700                                                                                  
                                                                                                                        
    Add theme support                                                                                                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                                                         
    7   -   [x] Handle file addition/deletion properly          7   -   [x] Handle file addition/deletion properly      
    8   -   [x] Fix incorrect line positions when a hunk has    8   -   [x] Fix incorrect line positions when a hunk has
    9   -   [x] Organize code                                   9   -   [x] Organize code                               
                                                               10 + -   [x] Move visual config to theme                 
   10   -   [ ] Handle empty diffs                             11   -   [ ] Handle empty diffs                          
   11   -   [ ] Handle moves and renames without diffs         12   -   [ ] Handle moves and renames without diffs      
   12   -   [ ] Highlight changes in lines                     13   -   [ ] Highlight changes in lines                  
   13                                                          14                                                       
   14                                                          15                                                       
"
`;

exports[`splitWithWrapping commit with a file move 1`] = `
"                                                                                
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithWrapping commit with a new binary file 1`] = `
"                                                                                
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithWrapping commit with a new file 1`] = `
"                                                                                
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
                                            1 + node_modules/**                 
                                            2 + build/**                        
                                            3   No newline at end of file       
"
`;

exports[`splitWithWrapping commit with a small diff 1`] = `
"                                                                                
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19   brew 'socat'                       19   brew 'socat'                    
                                           20 + brew 'sonos'                    
   20   brew 'terminal-notifier'           21   brew 'terminal-notifier'        
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42   cask 'slate'                       43   cask 'slate'                    
   43 - cask 'sonos'                                                            
   44   cask 'spotify'                     44   cask 'spotify'                  
"
`;

exports[`splitWithWrapping commit with addition 1`] = `
"                                                                                
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9   -   [x] Organize code               9   -   [x] Organize code           
                                           10 + -   [x] Move visual config to   
                                           10   theme                           
   10   -   [ ] Handle empty diffs         11   -   [ ] Handle empty diffs      
   11                                      12                                   
"
`;

exports[`splitWithWrapping commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   \\"search.location\\": \\"panel\\",
-  \\"search.usePCRE2\\": true,

   // telemetry
"
`;

exports[`splitWithWrapping commit with inline line changes 1`] = `
"                                                                                
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5 -         \\"revision\\": null            5 +         \\"revision\\": \\"ee2f8d3ba29
                                            5   76e50ef577d517bf175c94fbbb0dd\\"  
@@ -8 +8 @@                                                                     
    8 -         \\"revision\\": null            8 +         \\"revision\\": \\"c4cf96857c0
                                            8   50dfa4f65f52109862dc68e55f60a\\"  
@@ -11 +11 @@                                                                   
   11 -         \\"revision\\": null           11 +         \\"revision\\": \\"504d4b93aa6
                                           11   eaf4fce1bf17c19f55828ad7229a4\\"  
@@ -16 +16 @@                                                                   
   16 -         \\"version\\": \\"1.14.2_1\\",     16 +         \\"version\\": \\"1.16.3\\",    
@@ -17,0 +18 @@                                                                 
                                           18 +           \\"rebuild\\": 0,         
@@ -19,0 +21 @@                                                                 
                                           21 +           \\"root_url\\": \\"https://h
                                           21   omebrew.bintray.com/bottles\\",   
@@ -20,0 +23,8 @@                                                               
                                           23 +             \\"arm64_big_sur\\": {  
                                           24 +               \\"url\\": \\"https://ho
                                           24   mebrew.bintray.com/bottles/go-1.
                                           24   16.3.arm64_big_sur.bottle.tar.gz
                                           24   \\",                              
                                           25 +               \\"sha256\\": \\"e7c1efd
                                           25   d09e951eb46d01a3200b01e7fa55ce28
                                           25   5b75470051be7fef34f4233ce\\"      
                                           26 +             },                  
                                           27 +             \\"big_sur\\": {        
                                           28 +               \\"url\\": \\"https://ho
                                           28   mebrew.bintray.com/bottles/go-1.
                                           28   16.3.big_sur.bottle.tar.gz\\",    
                                           29 +               \\"sha256\\": \\"ea37f33
                                           29   fd27369612a3e4e6db6adc46db0e8bdf
                                           29   6fac1332bf51bafaa66d43969\\"      
                                           30 +             },                  
@@ -22,2 +32,2 @@                                                               
   22 -               \\"url\\": \\"https://ho   32 +               \\"url\\": \\"https://ho
   22   mebrew.bintray.com/bottles/go-1.   32   mebrew.bintray.com/bottles/go-1.
   22   14.2_1.catalina.bottle.tar.gz\\",    32   16.3.catalina.bottle.tar.gz\\",   
   23 -               \\"sha256\\": \\"15b5623   33 +               \\"sha256\\": \\"69c28f5
   23   471330edcc681d7f9d57b449660e6d4b   33   e60612801c66e51e93d32068f822b245
   23   98c7f67af67f4991fc75d61fc\\"         33   ab83246cb6cb374572eb59e15\\"      
@@ -26,6 +36,2 @@                                                               
   26 -               \\"url\\": \\"https://ho   36 +               \\"url\\": \\"https://ho
   26   mebrew.bintray.com/bottles/go-1.   36   mebrew.bintray.com/bottles/go-1.
   26   14.2_1.mojave.bottle.tar.gz\\",      36   16.3.mojave.bottle.tar.gz\\",     
   27 -               \\"sha256\\": \\"fa65e7d   37 +               \\"sha256\\": \\"bf1e90e
   27   abe514e65ae625ed3c84a6bf58df01ac   37   d1680b8ee1acb49f2f99426c8a8ac3e4
   27   effc6e9aa99752ca8c320ce69\\"         37   9efd63c7f3b41e57e7214dd19\\"      
   28 -             },                                                          
   29 -             \\"high_sierra\\": {                                            
   30 -               \\"url\\": \\"https://ho                                        
   30   mebrew.bintray.com/bottles/go-1.                                        
   30   14.2_1.high_sierra.bottle.tar.gz                                        
   30   \\",                                                                      
   31 -               \\"sha256\\": \\"0997f6f                                        
   31   5cda0e3bdb7789a80b53621cb588202a                                        
   31   b37fd89bcd269f8dfafd23351\\"                                              
   32                                      38                                   
"
`;

exports[`splitWithWrapping commits without diffs 1`] = `
"                                                                                
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`splitWithWrapping empty 1`] = `
"                                                                                
"
`;

exports[`splitWithWrapping multiple inserts and deletes in the same hunk 1`] = `
"                                                                                
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1   import chalk from 'chalk';          1   import chalk from 'chalk';      
    2   import * as process from            2   import * as process from        
    2   'process';                          2   'process';                      
                                            3 + import stream from 'stream';    
    3   import terminalSize from            4   import terminalSize from        
    3   'term-size';                        4   'term-size';                    
    4   import {                            5   import {                        
    4   iterlinesFromReadableAsync }        5   iterlinesFromReadableAsync }    
    4   from './iterLinesFromReadable';     5   from './iterLinesFromReadable'; 
    5   import {                            6   import {                        
    5   iterLinesWithoutAnsiColors }        6   iterLinesWithoutAnsiColors }    
    5   from                                6   from                            
    5   './iterLinesWithoutAnsiColors';     6   './iterLinesWithoutAnsiColors'; 
@@ -12,15 +13,16 @@ function main() {                                           
   12       const screenWidth =            13       const screenWidth =         
   12   terminalSize().columns;            13   terminalSize().columns;         
   13       const theme =                  14       const theme =               
   13   defaultTheme(chalk,                14   defaultTheme(chalk,             
   13   screenWidth);                      14   screenWidth);                   
   14                                      15                                   
   15 -                                    16 +     stream.pipeline(            
   15   transformStreamWithIterables(                                           
   16 -         process.stdin,             17 +                                 
                                           17   transformStreamWithIterables(   
   17 -         [                          18 +             process.stdin,      
   18                                      19                                   
   18   iterlinesFromReadableAsync,        19   iterlinesFromReadableAsync,     
   19                                      20                                   
   19   iterLinesWithoutAnsiColors,        20   iterLinesWithoutAnsiColors,     
   20                                      21                                   
   20   iterSideBySideDiff(theme),         21   iterSideBySideDiff(theme),      
   21 -             iterWithNewlines,      22 +             iterWithNewlines    
   22 -         ],                         23 +         ),                      
   23 -         process.stdout             24 +         process.stdout,         
                                           25 +         console.error           
   24       );                             26       );                          
   25   }                                  27   }                               
   26                                      28                                   
"
`;

exports[`splitWithWrapping with ANSI color codes 1`] = `
"                                                                                
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7   -   [x] Handle file                 7   -   [x] Handle file             
    7   addition/deletion properly          7   addition/deletion properly      
    8   -   [x] Fix incorrect line          8   -   [x] Fix incorrect line      
    8   positions when a hunk has           8   positions when a hunk has       
    8   discontinuous inserts and/or        8   discontinuous inserts and/or    
    8   deletes                             8   deletes                         
    9   -   [x] Organize code               9   -   [x] Organize code           
                                           10 + -   [x] Move visual config to   
                                           10   theme                           
   10   -   [ ] Handle empty diffs         11   -   [ ] Handle empty diffs      
   11   -   [ ] Handle moves and renames   12   -   [ ] Handle moves and renames
   11    without diffs                     12    without diffs                  
   12   -   [ ] Highlight changes in       13   -   [ ] Highlight changes in    
   12   lines                              13   lines                           
   13                                      14                                   
   14                                      15                                   
"
`;

exports[`splitWithoutWrapping commit with a file move 1`] = `
"                                                                                
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithoutWrapping commit with a new binary file 1`] = `
"                                                                                
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithoutWrapping commit with a new file 1`] = `
"                                                                                
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
                                            1 + node_modules/**                 
                                            2 + build/**                        
                                            3   No newline at end of file       
"
`;

exports[`splitWithoutWrapping commit with a small diff 1`] = `
"                                                                                
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19   brew 'socat'                       19   brew 'socat'                    
                                           20 + brew 'sonos'                    
   20   brew 'terminal-notifier'           21   brew 'terminal-notifier'        
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42   cask 'slate'                       43   cask 'slate'                    
   43 - cask 'sonos'                                                            
   44   cask 'spotify'                     44   cask 'spotify'                  
"
`;

exports[`splitWithoutWrapping commit with addition 1`] = `
"                                                                                
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9   -   [x] Organize code               9   -   [x] Organize code           
                                           10 + -   [x] Move visual config to th
   10   -   [ ] Handle empty diffs         11   -   [ ] Handle empty diffs      
   11                                      12                                   
"
`;

exports[`splitWithoutWrapping commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   \\"search.location\\": \\"panel\\",
-  \\"search.usePCRE2\\": true,

   // telemetry
"
`;

exports[`splitWithoutWrapping commit with inline line changes 1`] = `
"                                                                                
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5 -         \\"revision\\": null            5 +         \\"revision\\": \\"ee2f8d3ba29
@@ -8 +8 @@                                                                     
    8 -         \\"revision\\": null            8 +         \\"revision\\": \\"c4cf96857c0
@@ -11 +11 @@                                                                   
   11 -         \\"revision\\": null           11 +         \\"revision\\": \\"504d4b93aa6
@@ -16 +16 @@                                                                   
   16 -         \\"version\\": \\"1.14.2_1\\",     16 +         \\"version\\": \\"1.16.3\\",    
@@ -17,0 +18 @@                                                                 
                                           18 +           \\"rebuild\\": 0,         
@@ -19,0 +21 @@                                                                 
                                           21 +           \\"root_url\\": \\"https://h
@@ -20,0 +23,8 @@                                                               
                                           23 +             \\"arm64_big_sur\\": {  
                                           24 +               \\"url\\": \\"https://ho
                                           25 +               \\"sha256\\": \\"e7c1efd
                                           26 +             },                  
                                           27 +             \\"big_sur\\": {        
                                           28 +               \\"url\\": \\"https://ho
                                           29 +               \\"sha256\\": \\"ea37f33
                                           30 +             },                  
@@ -22,2 +32,2 @@                                                               
   22 -               \\"url\\": \\"https://ho   32 +               \\"url\\": \\"https://ho
   23 -               \\"sha256\\": \\"15b5623   33 +               \\"sha256\\": \\"69c28f5
@@ -26,6 +36,2 @@                                                               
   26 -               \\"url\\": \\"https://ho   36 +               \\"url\\": \\"https://ho
   27 -               \\"sha256\\": \\"fa65e7d   37 +               \\"sha256\\": \\"bf1e90e
   28 -             },                                                          
   29 -             \\"high_sierra\\": {                                            
   30 -               \\"url\\": \\"https://ho                                        
   31 -               \\"sha256\\": \\"0997f6f                                        
   32                                      38                                   
"
`;

exports[`splitWithoutWrapping commits without diffs 1`] = `
"                                                                                
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`splitWithoutWrapping empty 1`] = `
"                                                                                
"
`;

exports[`splitWithoutWrapping multiple inserts and deletes in the same hunk 1`] = `
"                                                                                
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1   import chalk from 'chalk';          1   import chalk from 'chalk';      
    2   import * as process from 'proces    2   import * as process from 'proces
                                            3 + import stream from 'stream';    
    3   import terminalSize from 'term-s    4   import terminalSize from 'term-s
    4   import { iterlinesFromReadableAs    5   import { iterlinesFromReadableAs
    5   import { iterLinesWithoutAnsiCol    6   import { iterLinesWithoutAnsiCol
@@ -12,15 +13,16 @@ function main() {                                           
   12       const screenWidth = terminal   13       const screenWidth = terminal
   13       const theme = defaultTheme(c   14       const theme = defaultTheme(c
   14                                      15                                   
   15 -     transformStreamWithIterables   16 +     stream.pipeline(            
   16 -         process.stdin,             17 +         transformStreamWithItera
   17 -         [                          18 +             process.stdin,      
   18               iterlinesFromReadabl   19               iterlinesFromReadabl
   19               iterLinesWithoutAnsi   20               iterLinesWithoutAnsi
   20               iterSideBySideDiff(t   21               iterSideBySideDiff(t
   21 -             iterWithNewlines,      22 +             iterWithNewlines    
   22 -         ],                         23 +         ),                      
   23 -         process.stdout             24 +         process.stdout,         
                                           25 +         console.error           
   24       );                             26       );                          
   25   }                                  27   }                               
   26                                      28                                   
"
`;

exports[`splitWithoutWrapping with ANSI color codes 1`] = `
"                                                                                
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7   -   [x] Handle file addition/del    7   -   [x] Handle file addition/del
    8   -   [x] Fix incorrect line posit    8   -   [x] Fix incorrect line posit
    9   -   [x] Organize code               9   -   [x] Organize code           
                                           10 + -   [x] Move visual config to th
   10   -   [ ] Handle empty diffs         11   -   [ ] Handle empty diffs      
   11   -   [ ] Handle moves and renames   12   -   [ ] Handle moves and renames
   12   -   [ ] Highlight changes in lin   13   -   [ ] Highlight changes in lin
   13                                      14                                   
   14                                      15                                   
"
`;
