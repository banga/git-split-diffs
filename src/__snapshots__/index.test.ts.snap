// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`inlineChangesHighlighted commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                                                         
Author: Shrey Banga <shrey@quip.com>                                                                                    
Date:   Tue May 23 16:47:17 2017 -0700                                                                                  
                                                                                                                        
    sonos to brew                                                                                                       
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                                                            
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                                                        
   19    brew 'socat'                                          19    brew 'socat'                                       
                                                               20  + brew 'sonos'                                       
   20    brew 'terminal-notifier'                              21    brew 'terminal-notifier'                           
@@ -42,3 +43,2 @@ cask 'rescuetime'                                                                                     
   42    cask 'slate'                                          43    cask 'slate'                                       
   43  - cask 'sonos'                                                                                                   
   44    cask 'spotify'                                        44    cask 'spotify'                                     
"
`;

exports[`inlineChangesHighlighted commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                                                         
Author: Shrey Banga <shrey@quip.com>                                                                                    
Date:   Tue May 23 16:47:17 2017 -0700                                                                                  
                                                                                                                        
    sonos to brew                                                                                                       
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                                                            
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                                                        
   19    brew 'socat'                                          19    brew 'socat'                                       
                                                               20  + brew 'sonos'                                       
   20    brew 'terminal-notifier'                              21    brew 'terminal-notifier'                           
@@ -42,3 +43,2 @@ cask 'rescuetime'                                                                                     
   42    cask 'slate'                                          43    cask 'slate'                                       
   43  - cask 'sonos'                                                                                                   
   44    cask 'spotify'                                        44    cask 'spotify'                                     
"
`;

exports[`inlineChangesHighlighted commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 15:25:34 2021 -0700                                                                                  
                                                                                                                        
    Add theme support                                                                                                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                                                         
    9    -   [x] Organize code                                  9    -   [x] Organize code                              
                                                               10  + -   [x] Move visual config to theme                
   10    -   [ ] Handle empty diffs                            11    -   [ ] Handle empty diffs                         
   11                                                          12                                                       
"
`;

exports[`inlineChangesHighlighted commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                                                          
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Wed Apr 14 18:24:29 2021 -0700                                                                                  
                                                                                                                        
    test binary file addition                                                                                           
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                                                              
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`inlineChangesHighlighted commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`inlineChangesHighlighted commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                                                                     
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                                                             
    4  - このリポジトリは、MS-DOS ░░░░░░及び MS-DOS v2.0 のオリジナルのソースコード及    4  + このリポジトリは、MS-DOS 及び MS-DOS v2.0 のオリジナルのソースコード及びコンパイル
    5                                                           5                                                       
"
`;

exports[`inlineChangesHighlighted commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sat Apr 10 14:35:42 2021 -0700                                                                                  
                                                                                                                        
    wip                                                                                                                 
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                                                          
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                                                         
                                                                1  + node_modules/**                                    
                                                                2  + build/**                                           
                                                                3    No newline at end of file                          
"
`;

exports[`inlineChangesHighlighted commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 18 03:17:05 2021 -0700                                                                                  
                                                                                                                        
    Update main.yml                                                                                                     
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■                                                                                                                     
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                                                         
    1  - on run argv                                                                                                    
    2  -     with timeout of 5 seconds                                                                                  
    3  -         tell app "Terminal"                                                                                    
    4  -             open "screenshots.sh"                                                                              
    5  -         end tell                                                                                               
    6  -     end timeout                                                                                                
    7  - end run                                                                                                        
    8    No newline at end of file                                                                                      
"
`;

exports[`inlineChangesHighlighted commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sat Apr 10 22:26:15 2021 -0700                                                                                  
                                                                                                                        
    Move sample diff files                                                                                              
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                                                                
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`inlineChangesHighlighted commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 4 19:04:26 2021 -0700                                                                                   
                                                                                                                        
    update lockfile                                                                                                     
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                                                                  
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                                                             
    5  -         "revision": ░░░░                               5  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -8 +8 @@                                                                                                             
    8  -         "revision": ░░░░                               8  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -11 +11 @@                                                                                                           
   11  -         "revision": ░░░░                              11  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -16 +16 @@                                                                                                           
   16  -         "version": "1.░░.░░░",                        16  +         "version": "1.░░.░",                       
@@ -17,0 +18 @@                                                                                                         
                                                               18  +           "rebuild": 0,                            
@@ -19,0 +21 @@                                                                                                         
                                                               21  +           "root_url": "https://homebrew.bintray.com
@@ -20,0 +23,8 @@                                                                                                       
                                                               23  +             "arm64_big_sur": {                     
                                                               24  +               "url": "https://homebrew.bintray.com/
                                                               25  +               "sha256": "e7c1efdd09e951eb46d01a3200
                                                               26  +             },                                     
                                                               27  +             "big_sur": {                           
                                                               28  +               "url": "https://homebrew.bintray.com/
                                                               29  +               "sha256": "ea37f33fd27369612a3e4e6db6
                                                               30  +             },                                     
@@ -22,2 +32,2 @@                                                                                                       
   22  -               "url": "https://homebrew.bintray.com/   32  +               "url": "https://homebrew.bintray.com/
   23  -               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░   33  +               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -26,6 +36,2 @@                                                                                                       
   26  -               "url": "https://homebrew.bintray.com/   36  +               "url": "https://homebrew.bintray.com/
   27  -               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░   37  +               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░
   28  -             },                                                                                                 
   29  -             "high_sierra": {                                                                                   
   30  -               "url": "https://homebrew.bintray.com/                                                            
   31  -               "sha256": "0997f6f5cda0e3bdb7789a80b5                                                            
   32                                                          38                                                       
"
`;

exports[`inlineChangesHighlighted commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 15:25:34 2021 -0700                                                                                  
                                                                                                                        
    Add theme support                                                                                                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                                                         
    9    -        [x] Organize code                             9    -        [x] Organize code                         
                                                               10  + -        [x] Move visual config to theme           
   10    -        [ ] Handle empty diffs                       11    -        [ ] Handle empty diffs                    
   11                                                          12                                                       
"
`;

exports[`inlineChangesHighlighted commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                                                          
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 16:23:54 2021 -0700                                                                                  
                                                                                                                        
    Small refactor to allow testing end-to-end                                                                          
                                                                                                                        
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 11:53:02 2021 -0700                                                                                  
                                                                                                                        
    Organize code                                                                                                       
                                                                                                                        
commit f323143e03af95fee5d38c21238a92ffd4461847                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 10:39:17 2021 -0700                                                                                  
                                                                                                                        
    more todos                                                                                                          
                                                                                                                        
"
`;

exports[`inlineChangesHighlighted diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                                                               
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                                                           
    1  - This is file1                                                                                                  
    2    No newline at end of file                              1    No newline at end of file                          
                                                                2  + This is file1                                      
                                                                3  + Experimental change                                
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                                                               
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                                                           
                                                                1  + All good                                           
    1    This is file2                                          2    This is file2                                      
"
`;

exports[`inlineChangesHighlighted empty 1`] = `
"
"
`;

exports[`inlineChangesHighlighted merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                                                         
Merge: 2439767601 fbcdb8cf4f                                                                                            
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                                                                
Date:   Thu Dec 21 17:57:42 2023 -0800                                                                                  
                                                                                                                        
    Merge branch 'main' into gabritto/d2                                                                                
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                                                              
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                                                                    
  137        isBlock,                     136        isBlock,                     137        isBlock,                   
  138        isBlockOrCatchScoped,        137        isBlockOrCatchScoped,        138        isBlockOrCatchScoped,      
  139        IsBlockScopedContainer,      138        IsBlockScopedContainer,      139        IsBlockScopedContainer,    
                                          139  +     isBooleanLiteral,            140  +     isBooleanLiteral,          
  140        isCallExpression,            140        isCallExpression,            141        isCallExpression,          
  141        isClassStaticBlockDeclarati  141        isClassStaticBlockDeclarati  142        isClassStaticBlockDeclarati
  142  +     isConditionalExpression,                                             143  +     isConditionalExpression,   
  143        isConditionalTypeNode,       142        isConditionalTypeNode,       144        isConditionalTypeNode,     
  144        IsContainer,                 143        IsContainer,                 145        IsContainer,               
  145        isDeclaration,               144        isDeclaration,               146        isDeclaration,             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                                                               
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                                                              
 5985        decoratorSignature?: Signat 6063        decoratorSignature?: Signat 6063        decoratorSignature?: Signat
 5986        spreadIndices?: { first: nu 6064        spreadIndices?: { first: nu 6064        spreadIndices?: { first: nu
 5987        parameterInitializerContain 6065        parameterInitializerContain 6065        parameterInitializerContain
 5988  -     fakeScopeForSignatureDeclar                                         6066  -     fakeScopeForSignatureDeclar
 5988  +     contextualReturnType?: Type                                         6066  +     contextualReturnType?: Type
                                         6066  +     fakeScopeForSignatureDeclar 6067  +     fakeScopeForSignatureDeclar
 5989        assertionExpressionType?: T 6067        assertionExpressionType?: T 6068        assertionExpressionType?: T
 5990    }                               6068    }                               6069    }                              
"
`;

exports[`inlineChangesHighlighted merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                                                         
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                                                                 
Author: Andy Hanson <anhans@microsoft.com>                                                                              
Date:   Thu Sep 1 12:52:42 2016 -0700                                                                                   
                                                                                                                        
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into constructor_references                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                                                            
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                                                              
 2788            return node & 2792            return node & 2788            return node & 2792            return node &
 2789        }                 2793        }                 2789        }                 2793        }                
 2790                          2794                          2790                          2794                         
 2791  +     function climbPas                               2791  +     function climbPas 2795  +     function climbPas
 2792  +         return isRigh                               2792  +         return isRigh 2796  +         return isRigh
 2793  +     }                                               2793  +     }                 2797  +     }                
 2794  +                                                     2794  +                       2798  +                      
                                                             2795  -     function climbPas 2799  -     function climbPas
                                                             2796  -         return isRigh 2800  -         return isRigh
                                                                                           2799  +     /** Get \`C\` given
                                                                                           2800  +     function tryGetCl
                                                                                           2801  +         return tryGet
                                                             2795  +     }                 2802  +     }                
                                                             2796  +                       2803  +                      
 2795        function isCallEx 2795        function isCallEx 2797        function isCallEx 2804        function isCallEx
                               2796  -         if (isRightSi                               2805  -         if (isRightSi
                               2797  -             node = no                               2806  -             node = no
                               2798  -         }                                           2807  -         }            
                                                             2798  -         node = climbP 2808  -         node = climbP
                               2799  -         return node & 2799  -         return node & 2809  -         return node &
 2796  +         return isCall                                                             2805  +         return isCall
 2797        }                 2800        }                 2800        }                 2806        }                
 2798                          2801                          2801                          2807                         
 2799        function isNewExp 2802        function isNewExp 2802        function isNewExp 2808        function isNewExp
                               2803  -         if (isRightSi                               2809  -         if (isRightSi
                               2804  -             node = no                               2810  -             node = no
                               2805  -         }                                           2811  -         }            
                                                             2803  -         node = climbP 2812  -         node = climbP
                               2806  -         return node & 2804  -         return node & 2813  -         return node &
 2800  +         return isCall                                                             2809  +         return isCall
 2801  +     }                                                                             2810  +     }                
 2802  +                                                                                   2811  +                      
 2803  +     function isCallOr                                                             2812  +     function isCallOr
 2804  +         const target                                                              2813  +         const target 
 2805  +         return target                                                             2814  +         return target
 2806  +     }                                                                             2815  +     }                
 2807  +                                                                                   2816  +                      
 2808  -     /** Get \`C\` given                                                             2817  -     /** Get \`C\` given
 2809  -     function tryGetCl                                                             2818  -     function tryGetCl
 2810  -         return tryGet                                                             2819  -         return tryGet
                                                                                           2817  +     function climbPas
                                                                                           2818  +         return isRigh
                                                             2801  +     }                 2819  +     }                
                                                             2802  +                       2820  +                      
                                                             2803  +     /** Returns a Cal 2821  +     /** Returns a Cal
                                                             2804  +     function getAnces 2822  +     function getAnces
                                                             2805  +         const target  2823  +         const target 
                                                             2806  +         const callLik 2824  +         const callLik
                                                             2807  +         return callLi 2825  +         return callLi
                                                             2808  +     }                 2826  +     }                
                                                             2809  +                       2827  +                      
                                                             2810  +     function tryGetSi 2828  +     function tryGetSi
                                                             2811  +         const callLik 2829  +         const callLik
                                                             2812  +         return callLi 2830  +         return callLi
 2811        }                 2807        }                 2813        }                 2831        }                
 2812                          2808                          2814                          2832                         
 2813        function isNameOf 2809        function isNameOf 2815        function isNameOf 2833        function isNameOf
 2814                          2810                          2816                          2834                         
"
`;

exports[`inlineChangesHighlighted multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 16:23:54 2021 -0700                                                                                  
                                                                                                                        
    Small refactor to allow testing end-to-end                                                                          
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                                                         
    1    import chalk from 'chalk';                             1    import chalk from 'chalk';                         
    2    import * as process from 'process';                    2    import * as process from 'process';                
                                                                3  + import stream from 'stream';                       
    3    import terminalSize from 'terminal-size';              4    import terminalSize from 'terminal-size';          
    4    import { iterlinesFromReadableAsync } from './iterL    5    import { iterlinesFromReadableAsync } from './iterL
    5    import { iterLinesWithoutAnsiColors } from './iterL    6    import { iterLinesWithoutAnsiColors } from './iterL
@@ -12,15 +13,16 @@ function main() {                                                                                   
   12        const screenWidth = terminalSize().columns;       13        const screenWidth = terminalSize().columns;    
   13        const theme = defaultTheme(chalk, screenWidth);   14        const theme = defaultTheme(chalk, screenWidth);
   14                                                          15                                                       
   15  -     transformStreamWithIterables(                     16  +     stream.pipeline(                               
   16  -         process.stdin,                                17  +         transformStreamWithIterables(              
   17  -         [                                             18  +             process.stdin,                         
   18                iterlinesFromReadableAsync,               19                iterlinesFromReadableAsync,            
   19                iterLinesWithoutAnsiColors,               20                iterLinesWithoutAnsiColors,            
   20                iterSideBySideDiff(theme),                21                iterSideBySideDiff(theme),             
   21  -             iterWithNewlines░                         22  +             iterWithNewlines                       
   22  -         ░,                                            23  +         ░,                                         
   23  -         process.stdout                                24  +         process.stdout░                            
                                                               25  +         console.error                              
   24        );                                                26        );                                             
   25    }                                                     27    }                                                  
   26                                                          28                                                       
"
`;

exports[`inlineChangesHighlighted with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                                                         
Author: Shrey Banga <banga.shrey@gmail.com>                                                                             
Date:   Sun Apr 11 15:25:34 2021 -0700                                                                                  
                                                                                                                        
    Add theme support                                                                                                   
                                                                                                                        
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                                                             
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                                                         
    7    -   [x] Handle file addition/deletion properly         7    -   [x] Handle file addition/deletion properly     
    8    -   [x] Fix incorrect line positions when a hunk ha    8    -   [x] Fix incorrect line positions when a hunk ha
    9    -   [x] Organize code                                  9    -   [x] Organize code                              
                                                               10  + -   [x] Move visual config to theme                
   10    -   [ ] Handle empty diffs                            11    -   [ ] Handle empty diffs                         
   11    -   [ ] Handle moves and renames without diffs        12    -   [ ] Handle moves and renames without diffs     
   12    -   [ ] Highlight changes in lines                    13    -   [ ] Highlight changes in lines                 
   13                                                          14                                                       
   14                                                          15                                                       
"
`;

exports[`splitWithWrapping commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`splitWithWrapping commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`splitWithWrapping commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -   [x] Organize code              9    -   [x] Organize code          
                                           10  + -   [x] Move visual config to  
                                                 theme                          
   10    -   [ ] Handle empty diffs        11    -   [ ] Handle empty diffs     
   11                                      12                                   
"
`;

exports[`splitWithWrapping commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithWrapping commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`splitWithWrapping commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                             
────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                     
    4  - このリポジトリは、MS-DOS v1.25     4  + このリポジトリは、MS-DOS 及び  
         及び MS-DOS v2.0 のオリジナルの         MS-DOS v2.0 のオリジナルのソー 
         ソースコード及びコンパイルされ          スコード及びコンパイルされたバ 
         たバイナリを含んでいます。              イナリを含んでいます。         
                                                                                
    5                                       5                                   
"
`;

exports[`splitWithWrapping commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
                                            1  + node_modules/**                
                                            2  + build/**                       
                                            3    No newline at end of file      
"
`;

exports[`splitWithWrapping commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 18 03:17:05 2021 -0700                                          
                                                                                
    Update main.yml                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■                                                                             
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                 
    1  - on run argv                                                            
    2  -     with timeout of 5 seconds                                          
    3  -         tell app "Terminal"                                            
    4  -             open                                                       
         "screenshots.sh"                                                       
    5  -         end tell                                                       
    6  -     end timeout                                                        
    7  - end run                                                                
    8    No newline at end of file                                              
"
`;

exports[`splitWithWrapping commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithWrapping commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5  -         "revision": null           5  +         "revision": "ee2f8d3ba2
                                                 976e50ef577d517bf175c94fbbb0dd"
@@ -8 +8 @@                                                                     
    8  -         "revision": null           8  +         "revision": "c4cf96857c
                                                 050dfa4f65f52109862dc68e55f60a"
@@ -11 +11 @@                                                                   
   11  -         "revision": null          11  +         "revision": "504d4b93aa
                                                 6eaf4fce1bf17c19f55828ad7229a4"
@@ -16 +16 @@                                                                   
   16  -         "version": "1.14.2_1",    16  +         "version": "1.16.3",   
@@ -17,0 +18 @@                                                                 
                                           18  +           "rebuild": 0,        
@@ -19,0 +21 @@                                                                 
                                           21  +           "root_url": "https://
                                                 homebrew.bintray.com/bottles", 
@@ -20,0 +23,8 @@                                                               
                                           23  +             "arm64_big_sur": { 
                                           24  +               "url": "https://h
                                                 omebrew.bintray.com/bottles/go-
                                                 1.16.3.arm64_big_sur.bottle.tar
                                                 .gz",                          
                                           25  +               "sha256": "e7c1ef
                                                 dd09e951eb46d01a3200b01e7fa55ce
                                                 285b75470051be7fef34f4233ce"   
                                           26  +             },                 
                                           27  +             "big_sur": {       
                                           28  +               "url": "https://h
                                                 omebrew.bintray.com/bottles/go-
                                                 1.16.3.big_sur.bottle.tar.gz", 
                                           29  +               "sha256": "ea37f3
                                                 3fd27369612a3e4e6db6adc46db0e8b
                                                 df6fac1332bf51bafaa66d43969"   
                                           30  +             },                 
@@ -22,2 +32,2 @@                                                               
   22  -               "url": "https://h   32  +               "url": "https://h
         omebrew.bintray.com/bottles/go-         omebrew.bintray.com/bottles/go-
         1.14.2_1.catalina.bottle.tar.gz         1.16.3.catalina.bottle.tar.gz",
         ",                                                                     
   23  -               "sha256": "15b562   33  +               "sha256": "69c28f
         3471330edcc681d7f9d57b449660e6d         5e60612801c66e51e93d32068f822b2
         4b98c7f67af67f4991fc75d61fc"            45ab83246cb6cb374572eb59e15"   
@@ -26,6 +36,2 @@                                                               
   26  -               "url": "https://h   36  +               "url": "https://h
         omebrew.bintray.com/bottles/go-         omebrew.bintray.com/bottles/go-
         1.14.2_1.mojave.bottle.tar.gz",         1.16.3.mojave.bottle.tar.gz",  
   27  -               "sha256": "fa65e7   37  +               "sha256": "bf1e90
         dabe514e65ae625ed3c84a6bf58df01         ed1680b8ee1acb49f2f99426c8a8ac3
         aceffc6e9aa99752ca8c320ce69"            e49efd63c7f3b41e57e7214dd19"   
   28  -             },                                                         
   29  -             "high_sierra": {                                           
   30  -               "url": "https://h                                        
         omebrew.bintray.com/bottles/go-                                        
         1.14.2_1.high_sierra.bottle.tar                                        
         .gz",                                                                  
   31  -               "sha256": "0997f6                                        
         f5cda0e3bdb7789a80b53621cb58820                                        
         2ab37fd89bcd269f8dfafd23351"                                           
   32                                      38                                   
"
`;

exports[`splitWithWrapping commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -        [x] Organize code         9    -        [x] Organize code     
                                           10  + -        [x] Move visual config
                                                  to theme                      
   10    -        [ ] Handle empty diffs   11    -        [ ] Handle empty diffs
   11                                      12                                   
"
`;

exports[`splitWithWrapping commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`splitWithWrapping diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  - This is file1                                                          
    2    No newline at end of file          1    No newline at end of file      
                                            2  + This is file1                  
                                            3  + Experimental change            
────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
                                            1  + All good                       
    1    This is file2                      2    This is file2                  
"
`;

exports[`splitWithWrapping empty 1`] = `
"
"
`;

exports[`splitWithWrapping merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                 
Merge: 2439767601 fbcdb8cf4f                                                    
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                        
Date:   Thu Dec 21 17:57:42 2023 -0800                                          
                                                                                
    Merge branch 'main' into gabritto/d2                                        
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                      
────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                            
  137        isBlock,       136        isBlock,       137        isBlock,     
  138        isBlockOrCatc  137        isBlockOrCatc  138        isBlockOrCatc
         hScoped,                  hScoped,                  hScoped,         
  139        IsBlockScoped  138        IsBlockScoped  139        IsBlockScoped
         Container,                Container,                Container,       
                            139  +                    140  +                  
                                   isBooleanLiteral,         isBooleanLiteral,
  140                       140                       141                     
         isCallExpression,         isCallExpression,         isCallExpression,
  141        isClassStatic  141        isClassStatic  142        isClassStatic
         BlockDeclaration,         BlockDeclaration,         BlockDeclaration,
  142  +     isConditional                            143  +     isConditional
         Expression,                                         Expression,      
  143        isConditional  142        isConditional  144        isConditional
         TypeNode,                 TypeNode,                 TypeNode,        
  144        IsContainer,   143        IsContainer,   145        IsContainer, 
  145                       144                       146                     
         isDeclaration,            isDeclaration,            isDeclaration,   
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                       
────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                      
 5985        decoratorSign 6063        decoratorSign 6063        decoratorSign
         ature?:                   ature?:                   ature?:          
         Signature;     //         Signature;     //         Signature;     //
          Signature for             Signature for             Signature for   
         decorator as if           decorator as if           decorator as if  
         invoked by the            invoked by the            invoked by the   
         runtime.                  runtime.                  runtime.         
 5986                      6064                      6064                     
         spreadIndices?: {         spreadIndices?: {         spreadIndices?: {
          first: number |           first: number |           first: number | 
         undefined, last:          undefined, last:          undefined, last: 
         number |                  number |                  number |         
         undefined }; //           undefined }; //           undefined }; //  
         Indices of first          Indices of first          Indices of first 
         and last spread           and last spread           and last spread  
         elements in array         elements in array         elements in array
          literal                   literal                   literal         
 5987        parameterInit 6065        parameterInit 6065        parameterInit
         ializerContainsUn         ializerContainsUn         ializerContainsUn
         defined?:                 defined?:                 defined?:        
         boolean; // True          boolean; // True          boolean; // True 
         if this is a              if this is a              if this is a     
         parameter                 parameter                 parameter        
         declaration whose         declaration whose         declaration whose
          type annotation           type annotation           type annotation 
         contains                  contains                  contains         
         "undefined".              "undefined".              "undefined".     
 5988  -     fakeScopeForS                           6066  -     fakeScopeForS
         ignatureDeclarati                                   ignatureDeclarati
         on?: boolean; //                                    on?: boolean; // 
         True if this is a                                   True if this is a
          fake scope                                          fake scope      
         injected into an                                    injected into an 
         enclosing                                           enclosing        
         declaration                                         declaration      
         chain.                                              chain.           
 5988  +     contextualRet                           6066  +     contextualRet
         urnType?: Type;                                     urnType?: Type;  
               // If the                                           // If the  
         node is a return                                    node is a return 
         statement's                                         statement's      
         expression, then                                    expression, then 
         this is the                                         this is the      
         contextual return                                   contextual return
          type.                                               type.           
                           6066  +     fakeScopeForS 6067  +     fakeScopeForS
                                   ignatureDeclarati         ignatureDeclarati
                                   on?: "params" |           on?: "params" |  
                                   "typeParams"; //          "typeParams"; // 
                                   If present, this          If present, this 
                                   is a fake scope           is a fake scope  
                                   injected into an          injected into an 
                                   enclosing                 enclosing        
                                   declaration               declaration      
                                   chain.                    chain.           
 5989        assertionExpr 6067        assertionExpr 6068        assertionExpr
         essionType?:              essionType?:              essionType?:     
         Type;     //              Type;     //              Type;     //     
         Cached type of            Cached type of            Cached type of   
         the expression of         the expression of         the expression of
          a type assertion          a type assertion          a type assertion
 5990    }                 6068    }                 6069    }                
"
`;

exports[`splitWithWrapping merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                 
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                         
Author: Andy Hanson <anhans@microsoft.com>                                      
Date:   Thu Sep 1 12:52:42 2016 -0700                                           
                                                                                
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into  
constructor_references                                                          
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                    
────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                      
 2788                2792                2788                2792               
         return node         return node         return node         return node
          &&                  &&                  &&                  &&        
         node.parent         node.parent         node.parent         node.parent
          && node.pa          && node.pa          && node.pa          && node.pa
         rent.kind           rent.kind           rent.kind           rent.kind  
         === SyntaxK         === SyntaxK         === SyntaxK         === SyntaxK
         ind.Propert         ind.Propert         ind.Propert         ind.Propert
         yAccessExpr         yAccessExpr         yAccessExpr         yAccessExpr
         ession && (         ession && (         ession && (         ession && (
         <PropertyAc         <PropertyAc         <PropertyAc         <PropertyAc
         cessExpress         cessExpress         cessExpress         cessExpress
         ion>node.pa         ion>node.pa         ion>node.pa         ion>node.pa
         rent).name          rent).name          rent).name          rent).name 
         === node;           === node;           === node;           === node;  
 2789        }       2793        }       2789        }       2793        }      
 2790                2794                2790                2794               
 2791  +                                 2791  +             2795  +            
         function cl                             function cl         function cl
         imbPastProp                             imbPastProp         imbPastProp
         ertyAccess(                             ertyAccess(         ertyAccess(
         node: Node)                             node: Node)         node: Node)
          {                                       {                   {         
 2792  +                                 2792  +             2796  +            
         return isRi                             return isRi         return isRi
         ghtSideOfPr                             ghtSideOfPr         ghtSideOfPr
         opertyAcces                             opertyAcces         opertyAcces
         s(node) ?                               s(node) ?           s(node) ?  
         node.parent                             node.parent         node.parent
          : node;                                 : node;             : node;   
 2793  +     }                           2793  +     }       2797  +     }      
 2794  +                                 2794  +             2798  +            
                                         2795  -             2799  -            
                                                 function cl         function cl
                                                 imbPastMany         imbPastMany
                                                 PropertyAcc         PropertyAcc
                                                 esses(node:         esses(node:
                                                  Node):              Node):    
                                                 Node {              Node {     
                                         2796  -             2800  -            
                                                 return isRi         return isRi
                                                 ghtSideOfPr         ghtSideOfPr
                                                 opertyAcces         opertyAcces
                                                 s(node) ? c         s(node) ? c
                                                 limbPastMan         limbPastMan
                                                 yPropertyAc         yPropertyAc
                                                 cesses(node         cesses(node
                                                 .parent) :          .parent) : 
                                                 node;               node;      
                                                             2799  +     /** Get
                                                                      \`C\` given 
                                                                     \`N\` if \`N\` 
                                                                     is in the  
                                                                     position   
                                                                     \`class C   
                                                                     extends N\` 
                                                                     or \`class C
                                                                      extends   
                                                                     foo.N\`     
                                                                     where \`N\`  
                                                                     is an      
                                                                     identifier.
                                                                      */        
                                                             2800  +            
                                                                     function tr
                                                                     yGetClassEx
                                                                     tendingIden
                                                                     tifier(node
                                                                     : Node): Cl
                                                                     assLikeDecl
                                                                     aration |  
                                                                     undefined {
                                                             2801  +            
                                                                     return tryG
                                                                     etClassExte
                                                                     ndingExpres
                                                                     sionWithTyp
                                                                     eArguments(
                                                                     climbPastPr
                                                                     opertyAcces
                                                                     s(node).par
                                                                     ent);      
                                         2795  +     }       2802  +     }      
                                         2796  +             2803  +            
 2795                2795                2797                2804               
         function is         function is         function is         function is
         CallExpress         CallExpress         CallExpress         CallExpress
         ionTarget(n         ionTarget(n         ionTarget(n         ionTarget(n
         ode: Node):         ode: Node):         ode: Node):         ode: Node):
          boolean {           boolean {           boolean {           boolean { 
                     2796  -         if                      2805  -         if 
                             (isRightSid                             (isRightSid
                             eOfProperty                             eOfProperty
                             Access(node                             Access(node
                             )) {                                    )) {       
                     2797  -                                 2806  -            
                              node = nod                              node = nod
                             e.parent;                               e.parent;  
                     2798  -         }                       2807  -         }  
                                         2798  -             2808  -            
                                                 node = clim         node = clim
                                                 bPastProper         bPastProper
                                                 tyAccess(no         tyAccess(no
                                                 de);                de);       
                     2799  -             2799  -             2809  -            
                             return node         return node         return node
                              &&                  &&                  &&        
                             node.parent         node.parent         node.parent
                              && node.pa          && node.pa          && node.pa
                             rent.kind           rent.kind           rent.kind  
                             === SyntaxK         === SyntaxK         === SyntaxK
                             ind.CallExp         ind.CallExp         ind.CallExp
                             ression &&          ression &&          ression && 
                             (<CallExpre         (<CallExpre         (<CallExpre
                             ssion>node.         ssion>node.         ssion>node.
                             parent).exp         parent).exp         parent).exp
                             ression ===         ression ===         ression ===
                              node;               node;               node;     
 2796  +                                                     2805  +            
         return isCa                                                 return isCa
         llOrNewExpr                                                 llOrNewExpr
         essionTarge                                                 essionTarge
         t(node, Syn                                                 t(node, Syn
         taxKind.Cal                                                 taxKind.Cal
         lExpression                                                 lExpression
         );                                                          );         
 2797        }       2800        }       2800        }       2806        }      
 2798                2801                2801                2807               
 2799                2802                2802                2808               
         function is         function is         function is         function is
         NewExpressi         NewExpressi         NewExpressi         NewExpressi
         onTarget(no         onTarget(no         onTarget(no         onTarget(no
         de: Node):          de: Node):          de: Node):          de: Node): 
         boolean {           boolean {           boolean {           boolean {  
                     2803  -         if                      2809  -         if 
                             (isRightSid                             (isRightSid
                             eOfProperty                             eOfProperty
                             Access(node                             Access(node
                             )) {                                    )) {       
                     2804  -                                 2810  -            
                              node = nod                              node = nod
                             e.parent;                               e.parent;  
                     2805  -         }                       2811  -         }  
                                         2803  -             2812  -            
                                                 node = clim         node = clim
                                                 bPastProper         bPastProper
                                                 tyAccess(no         tyAccess(no
                                                 de);                de);       
                     2806  -             2804  -             2813  -            
                             return node         return node         return node
                              &&                  &&                  &&        
                             node.parent         node.parent         node.parent
                              && node.pa          && node.pa          && node.pa
                             rent.kind           rent.kind           rent.kind  
                             === SyntaxK         === SyntaxK         === SyntaxK
                             ind.NewExpr         ind.NewExpr         ind.NewExpr
                             ession && (         ession && (         ession && (
                             <CallExpres         <CallExpres         <CallExpres
                             sion>node.p         sion>node.p         sion>node.p
                             arent).expr         arent).expr         arent).expr
                             ession ===          ession ===          ession === 
                             node;               node;               node;      
 2800  +                                                     2809  +            
         return isCa                                                 return isCa
         llOrNewExpr                                                 llOrNewExpr
         essionTarge                                                 essionTarge
         t(node, Syn                                                 t(node, Syn
         taxKind.New                                                 taxKind.New
         Expression)                                                 Expression)
         ;                                                           ;          
 2801  +     }                                               2810  +     }      
 2802  +                                                     2811  +            
 2803  +                                                     2812  +            
         function is                                                 function is
         CallOrNewEx                                                 CallOrNewEx
         pressionTar                                                 pressionTar
         get(node:                                                   get(node:  
         Node, kind:                                                 Node, kind:
                                                                                
         SyntaxKind)                                                 SyntaxKind)
          {                                                           {         
 2804  +                                                     2813  +            
         const                                                       const      
         target = cl                                                 target = cl
         imbPastProp                                                 imbPastProp
         ertyAccess(                                                 ertyAccess(
         node);                                                      node);     
 2805  +                                                     2814  +            
         return                                                      return     
         target && t                                                 target && t
         arget.paren                                                 arget.paren
         t && target                                                 t && target
         .parent.kin                                                 .parent.kin
         d === kind                                                  d === kind 
         && (<CallEx                                                 && (<CallEx
         pression>ta                                                 pression>ta
         rget.parent                                                 rget.parent
         ).expressio                                                 ).expressio
         n ===                                                       n ===      
         target;                                                     target;    
 2806  +     }                                               2815  +     }      
 2807  +                                                     2816  +            
 2808  -     /** Get                                         2817  -     /** Get
          \`C\` given                                                   \`C\` given 
         \`N\` if \`N\`                                                  \`N\` if \`N\` 
         is in the                                                   is in the  
         position                                                    position   
         \`class C                                                    \`class C   
         extends N\`                                                  extends N\` 
         or \`class C                                                 or \`class C
          extends                                                     extends   
         foo.N\`                                                      foo.N\`     
         where \`N\`                                                   where \`N\`  
         is an                                                       is an      
         identifier.                                                 identifier.
          */                                                          */        
 2809  -                                                     2818  -            
         function tr                                                 function tr
         yGetClassEx                                                 yGetClassEx
         tendingIden                                                 tendingIden
         tifier(node                                                 tifier(node
         : Node): Cl                                                 : Node): Cl
         assLikeDecl                                                 assLikeDecl
         aration |                                                   aration |  
         undefined {                                                 undefined {
 2810  -                                                     2819  -            
         return tryG                                                 return tryG
         etClassExte                                                 etClassExte
         ndingExpres                                                 ndingExpres
         sionWithTyp                                                 sionWithTyp
         eArguments(                                                 eArguments(
         climbPastPr                                                 climbPastPr
         opertyAcces                                                 opertyAcces
         s(node).par                                                 s(node).par
         ent);                                                       ent);      
                                                             2817  +            
                                                                     function cl
                                                                     imbPastMany
                                                                     PropertyAcc
                                                                     esses(node:
                                                                      Node):    
                                                                     Node {     
                                                             2818  +            
                                                                     return isRi
                                                                     ghtSideOfPr
                                                                     opertyAcces
                                                                     s(node) ? c
                                                                     limbPastMan
                                                                     yPropertyAc
                                                                     cesses(node
                                                                     .parent) : 
                                                                     node;      
                                         2801  +     }       2819  +     }      
                                         2802  +             2820  +            
                                         2803  +     /**     2821  +     /**    
                                                 Returns a C         Returns a C
                                                 allLikeExpr         allLikeExpr
                                                 ession              ession     
                                                 where               where      
                                                 \`node\` is           \`node\` is  
                                                 the target          the target 
                                                 being               being      
                                                 invoked. */         invoked. */
                                         2804  +             2822  +            
                                                 function ge         function ge
                                                 tAncestorCa         tAncestorCa
                                                 llLikeExpre         llLikeExpre
                                                 ssion(node:         ssion(node:
                                                  Node): Cal          Node): Cal
                                                 lLikeExpres         lLikeExpres
                                                 sion |              sion |     
                                                 undefined {         undefined {
                                         2805  +             2823  +            
                                                 const               const      
                                                 target = cl         target = cl
                                                 imbPastMany         imbPastMany
                                                 PropertyAcc         PropertyAcc
                                                 esses(node)         esses(node)
                                                 ;                   ;          
                                         2806  +             2824  +            
                                                 const               const      
                                                 callLike =          callLike = 
                                                 target.pare         target.pare
                                                 nt;                 nt;        
                                         2807  +             2825  +            
                                                 return              return     
                                                 callLike &&         callLike &&
                                                  isCallLike          isCallLike
                                                 Expression(         Expression(
                                                 callLike)           callLike)  
                                                 && getInvok         && getInvok
                                                 edExpressio         edExpressio
                                                 n(callLike)         n(callLike)
                                                  === target          === target
                                                  &&                  &&        
                                                 callLike;           callLike;  
                                         2808  +     }       2826  +     }      
                                         2809  +             2827  +            
                                         2810  +             2828  +            
                                                 function tr         function tr
                                                 yGetSignatu         yGetSignatu
                                                 reDeclarati         reDeclarati
                                                 on(typeChec         on(typeChec
                                                 ker: TypeCh         ker: TypeCh
                                                 ecker,              ecker,     
                                                 node:               node:      
                                                 Node): Sign         Node): Sign
                                                 atureDeclar         atureDeclar
                                                 ation |             ation |    
                                                 undefined {         undefined {
                                         2811  +             2829  +            
                                                 const               const      
                                                 callLike =          callLike = 
                                                 getAncestor         getAncestor
                                                 CallLikeExp         CallLikeExp
                                                 ression(nod         ression(nod
                                                 e);                 e);        
                                         2812  +             2830  +            
                                                 return              return     
                                                 callLike &&         callLike &&
                                                  typeChecke          typeChecke
                                                 r.getResolv         r.getResolv
                                                 edSignature         edSignature
                                                 (callLike).         (callLike).
                                                 declaration         declaration
                                                 ;                   ;          
 2811        }       2807        }       2813        }       2831        }      
 2812                2808                2814                2832               
 2813                2809                2815                2833               
         function is         function is         function is         function is
         NameOfModul         NameOfModul         NameOfModul         NameOfModul
         eDeclaratio         eDeclaratio         eDeclaratio         eDeclaratio
         n(node:             n(node:             n(node:             n(node:    
         Node) {             Node) {             Node) {             Node) {    
 2814                2810                2816                2834               
"
`;

exports[`splitWithWrapping multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1    import chalk from 'chalk';         1    import chalk from 'chalk';     
    2    import * as process from           2    import * as process from       
         'process';                              'process';                     
                                            3  + import stream from 'stream';   
    3    import terminalSize from           4    import terminalSize from       
         'terminal-size';                        'terminal-size';               
    4    import {                           5    import {                       
         iterlinesFromReadableAsync }            iterlinesFromReadableAsync }   
         from './iterLinesFromReadable';         from './iterLinesFromReadable';
    5    import {                           6    import {                       
         iterLinesWithoutAnsiColors }            iterLinesWithoutAnsiColors }   
         from                                    from                           
         './iterLinesWithoutAnsiColors';         './iterLinesWithoutAnsiColors';
@@ -12,15 +13,16 @@ function main() {                                           
   12        const screenWidth =           13        const screenWidth =        
         terminalSize().columns;                 terminalSize().columns;        
   13        const theme =                 14        const theme =              
         defaultTheme(chalk,                     defaultTheme(chalk,            
         screenWidth);                           screenWidth);                  
   14                                      15                                   
   15  -                                   16  +     stream.pipeline(           
         transformStreamWithIterables(                                          
   16  -         process.stdin,            17  +                                
                                                 transformStreamWithIterables(  
   17  -         [                         18  +             process.stdin,     
   18                                      19                                   
         iterlinesFromReadableAsync,             iterlinesFromReadableAsync,    
   19                                      20                                   
         iterLinesWithoutAnsiColors,             iterLinesWithoutAnsiColors,    
   20                                      21                                   
         iterSideBySideDiff(theme),              iterSideBySideDiff(theme),     
   21  -             iterWithNewlines,     22  +             iterWithNewlines   
   22  -         ],                        23  +         ),                     
   23  -         process.stdout            24  +         process.stdout,        
                                           25  +         console.error          
   24        );                            26        );                         
   25    }                                 27    }                              
   26                                      28                                   
"
`;

exports[`splitWithWrapping with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7    -   [x] Handle file                7    -   [x] Handle file            
         addition/deletion properly              addition/deletion properly     
    8    -   [x] Fix incorrect line         8    -   [x] Fix incorrect line     
         positions when a hunk has               positions when a hunk has      
         discontinuous inserts and/or            discontinuous inserts and/or   
         deletes                                 deletes                        
    9    -   [x] Organize code              9    -   [x] Organize code          
                                           10  + -   [x] Move visual config to  
                                                 theme                          
   10    -   [ ] Handle empty diffs        11    -   [ ] Handle empty diffs     
   11    -   [ ] Handle moves and          12    -   [ ] Handle moves and       
         renames without diffs                   renames without diffs          
   12    -   [ ] Highlight changes in      13    -   [ ] Highlight changes in   
         lines                                   lines                          
   13                                      14                                   
   14                                      15                                   
"
`;

exports[`splitWithoutWrapping commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`splitWithoutWrapping commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`splitWithoutWrapping commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -   [x] Organize code              9    -   [x] Organize code          
                                           10  + -   [x] Move visual config to t
   10    -   [ ] Handle empty diffs        11    -   [ ] Handle empty diffs     
   11                                      12                                   
"
`;

exports[`splitWithoutWrapping commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithoutWrapping commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`splitWithoutWrapping commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                             
────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                     
    4  - このリポジトリは、MS-DOS v1.25 及び MS-DOS    4  + このリポジトリは、MS-DOS 及び MS-DOS v2.0 
    5                                       5                                   
"
`;

exports[`splitWithoutWrapping commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
                                            1  + node_modules/**                
                                            2  + build/**                       
                                            3    No newline at end of file      
"
`;

exports[`splitWithoutWrapping commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 18 03:17:05 2021 -0700                                          
                                                                                
    Update main.yml                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■                                                                             
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                 
    1  - on run argv                                                            
    2  -     with timeout of 5 seconds                                          
    3  -         tell app "Terminal"                                            
    4  -             open "screenshots.s                                        
    5  -         end tell                                                       
    6  -     end timeout                                                        
    7  - end run                                                                
    8    No newline at end of file                                              
"
`;

exports[`splitWithoutWrapping commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`splitWithoutWrapping commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5  -         "revision": null           5  +         "revision": "ee2f8d3ba2
@@ -8 +8 @@                                                                     
    8  -         "revision": null           8  +         "revision": "c4cf96857c
@@ -11 +11 @@                                                                   
   11  -         "revision": null          11  +         "revision": "504d4b93aa
@@ -16 +16 @@                                                                   
   16  -         "version": "1.14.2_1",    16  +         "version": "1.16.3",   
@@ -17,0 +18 @@                                                                 
                                           18  +           "rebuild": 0,        
@@ -19,0 +21 @@                                                                 
                                           21  +           "root_url": "https://
@@ -20,0 +23,8 @@                                                               
                                           23  +             "arm64_big_sur": { 
                                           24  +               "url": "https://h
                                           25  +               "sha256": "e7c1ef
                                           26  +             },                 
                                           27  +             "big_sur": {       
                                           28  +               "url": "https://h
                                           29  +               "sha256": "ea37f3
                                           30  +             },                 
@@ -22,2 +32,2 @@                                                               
   22  -               "url": "https://h   32  +               "url": "https://h
   23  -               "sha256": "15b562   33  +               "sha256": "69c28f
@@ -26,6 +36,2 @@                                                               
   26  -               "url": "https://h   36  +               "url": "https://h
   27  -               "sha256": "fa65e7   37  +               "sha256": "bf1e90
   28  -             },                                                         
   29  -             "high_sierra": {                                           
   30  -               "url": "https://h                                        
   31  -               "sha256": "0997f6                                        
   32                                      38                                   
"
`;

exports[`splitWithoutWrapping commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -        [x] Organize code         9    -        [x] Organize code     
                                           10  + -        [x] Move visual config
   10    -        [ ] Handle empty diffs   11    -        [ ] Handle empty diffs
   11                                      12                                   
"
`;

exports[`splitWithoutWrapping commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`splitWithoutWrapping diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  - This is file1                                                          
    2    No newline at end of file          1    No newline at end of file      
                                            2  + This is file1                  
                                            3  + Experimental change            
────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
                                            1  + All good                       
    1    This is file2                      2    This is file2                  
"
`;

exports[`splitWithoutWrapping empty 1`] = `
"
"
`;

exports[`splitWithoutWrapping merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                 
Merge: 2439767601 fbcdb8cf4f                                                    
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                        
Date:   Thu Dec 21 17:57:42 2023 -0800                                          
                                                                                
    Merge branch 'main' into gabritto/d2                                        
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                      
────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                            
  137        isBlock,       136        isBlock,       137        isBlock,     
  138        isBlockOrCatc  137        isBlockOrCatc  138        isBlockOrCatc
  139        IsBlockScoped  138        IsBlockScoped  139        IsBlockScoped
                            139  +     isBooleanLite  140  +     isBooleanLite
  140        isCallExpress  140        isCallExpress  141        isCallExpress
  141        isClassStatic  141        isClassStatic  142        isClassStatic
  142  +     isConditional                            143  +     isConditional
  143        isConditional  142        isConditional  144        isConditional
  144        IsContainer,   143        IsContainer,   145        IsContainer, 
  145        isDeclaration  144        isDeclaration  146        isDeclaration
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                       
────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                      
 5985        decoratorSign 6063        decoratorSign 6063        decoratorSign
 5986        spreadIndices 6064        spreadIndices 6064        spreadIndices
 5987        parameterInit 6065        parameterInit 6065        parameterInit
 5988  -     fakeScopeForS                           6066  -     fakeScopeForS
 5988  +     contextualRet                           6066  +     contextualRet
                           6066  +     fakeScopeForS 6067  +     fakeScopeForS
 5989        assertionExpr 6067        assertionExpr 6068        assertionExpr
 5990    }                 6068    }                 6069    }                
"
`;

exports[`splitWithoutWrapping merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                 
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                         
Author: Andy Hanson <anhans@microsoft.com>                                      
Date:   Thu Sep 1 12:52:42 2016 -0700                                           
                                                                                
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into c
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                    
────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                      
 2788            ret 2792            ret 2788            ret 2792            ret
 2789        }       2793        }       2789        }       2793        }      
 2790                2794                2790                2794               
 2791  +     functio                     2791  +     functio 2795  +     functio
 2792  +         ret                     2792  +         ret 2796  +         ret
 2793  +     }                           2793  +     }       2797  +     }      
 2794  +                                 2794  +             2798  +            
                                         2795  -     functio 2799  -     functio
                                         2796  -         ret 2800  -         ret
                                                             2799  +     /** Get
                                                             2800  +     functio
                                                             2801  +         ret
                                         2795  +     }       2802  +     }      
                                         2796  +             2803  +            
 2795        functio 2795        functio 2797        functio 2804        functio
                     2796  -         if                      2805  -         if 
                     2797  -                                 2806  -            
                     2798  -         }                       2807  -         }  
                                         2798  -         nod 2808  -         nod
                     2799  -         ret 2799  -         ret 2809  -         ret
 2796  +         ret                                         2805  +         ret
 2797        }       2800        }       2800        }       2806        }      
 2798                2801                2801                2807               
 2799        functio 2802        functio 2802        functio 2808        functio
                     2803  -         if                      2809  -         if 
                     2804  -                                 2810  -            
                     2805  -         }                       2811  -         }  
                                         2803  -         nod 2812  -         nod
                     2806  -         ret 2804  -         ret 2813  -         ret
 2800  +         ret                                         2809  +         ret
 2801  +     }                                               2810  +     }      
 2802  +                                                     2811  +            
 2803  +     functio                                         2812  +     functio
 2804  +         con                                         2813  +         con
 2805  +         ret                                         2814  +         ret
 2806  +     }                                               2815  +     }      
 2807  +                                                     2816  +            
 2808  -     /** Get                                         2817  -     /** Get
 2809  -     functio                                         2818  -     functio
 2810  -         ret                                         2819  -         ret
                                                             2817  +     functio
                                                             2818  +         ret
                                         2801  +     }       2819  +     }      
                                         2802  +             2820  +            
                                         2803  +     /** Ret 2821  +     /** Ret
                                         2804  +     functio 2822  +     functio
                                         2805  +         con 2823  +         con
                                         2806  +         con 2824  +         con
                                         2807  +         ret 2825  +         ret
                                         2808  +     }       2826  +     }      
                                         2809  +             2827  +            
                                         2810  +     functio 2828  +     functio
                                         2811  +         con 2829  +         con
                                         2812  +         ret 2830  +         ret
 2811        }       2807        }       2813        }       2831        }      
 2812                2808                2814                2832               
 2813        functio 2809        functio 2815        functio 2833        functio
 2814                2810                2816                2834               
"
`;

exports[`splitWithoutWrapping multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1    import chalk from 'chalk';         1    import chalk from 'chalk';     
    2    import * as process from 'proce    2    import * as process from 'proce
                                            3  + import stream from 'stream';   
    3    import terminalSize from 'termi    4    import terminalSize from 'termi
    4    import { iterlinesFromReadableA    5    import { iterlinesFromReadableA
    5    import { iterLinesWithoutAnsiCo    6    import { iterLinesWithoutAnsiCo
@@ -12,15 +13,16 @@ function main() {                                           
   12        const screenWidth = termina   13        const screenWidth = termina
   13        const theme = defaultTheme(   14        const theme = defaultTheme(
   14                                      15                                   
   15  -     transformStreamWithIterable   16  +     stream.pipeline(           
   16  -         process.stdin,            17  +         transformStreamWithIter
   17  -         [                         18  +             process.stdin,     
   18                iterlinesFromReadab   19                iterlinesFromReadab
   19                iterLinesWithoutAns   20                iterLinesWithoutAns
   20                iterSideBySideDiff(   21                iterSideBySideDiff(
   21  -             iterWithNewlines,     22  +             iterWithNewlines   
   22  -         ],                        23  +         ),                     
   23  -         process.stdout            24  +         process.stdout,        
                                           25  +         console.error          
   24        );                            26        );                         
   25    }                                 27    }                              
   26                                      28                                   
"
`;

exports[`splitWithoutWrapping with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7    -   [x] Handle file addition/de    7    -   [x] Handle file addition/de
    8    -   [x] Fix incorrect line posi    8    -   [x] Fix incorrect line posi
    9    -   [x] Organize code              9    -   [x] Organize code          
                                           10  + -   [x] Move visual config to t
   10    -   [ ] Handle empty diffs        11    -   [ ] Handle empty diffs     
   11    -   [ ] Handle moves and rename   12    -   [ ] Handle moves and rename
   12    -   [ ] Highlight changes in li   13    -   [ ] Highlight changes in li
   13                                      14                                   
   14                                      15                                   
"
`;

exports[`syntaxHighlighted commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`syntaxHighlighted commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                      19    brew 'socat'                   
                                           20  + brew 'sonos'                   
   20    brew 'terminal-notifier'          21    brew 'terminal-notifier'       
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                      43    cask 'slate'                   
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                    44    cask 'spotify'                 
"
`;

exports[`syntaxHighlighted commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    ░░░░░░░░░░░░░░░░░░░░░              9    ░░░░░░░░░░░░░░░░░░░░░          
                                           10  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   10    ░░░░░░░░░░░░░░░░░░░░░░░░░░        11    ░░░░░░░░░░░░░░░░░░░░░░░░░░     
   11                                      12                                   
"
`;

exports[`syntaxHighlighted commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`syntaxHighlighted commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`syntaxHighlighted commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                             
────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                     
    4  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    4  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    5                                       5                                   
"
`;

exports[`syntaxHighlighted commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
                                            1  + node_modules/**                
                                            2  + build/**                       
                                            3    No newline at end of file      
"
`;

exports[`syntaxHighlighted commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 18 03:17:05 2021 -0700                                          
                                                                                
    Update main.yml                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■                                                                             
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                 
    1  - on run argv                                                            
    2  -     with timeout of 5 seconds                                          
    3  -         tell app "Terminal"                                            
    4  -             open "screenshots.s                                        
    5  -         end tell                                                       
    6  -     end timeout                                                        
    7  - end run                                                                
    8    No newline at end of file                                              
"
`;

exports[`syntaxHighlighted commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`syntaxHighlighted commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5  - ░░░░░░░░░░░░░░░░░░░░░░░░           5  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -8 +8 @@                                                                     
    8  - ░░░░░░░░░░░░░░░░░░░░░░░░           8  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -11 +11 @@                                                                   
   11  - ░░░░░░░░░░░░░░░░░░░░░░░░          11  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -16 +16 @@                                                                   
   16  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    16  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░   
@@ -17,0 +18 @@                                                                 
                                           18  + ░░░░░░░░░░░░░░░░░░░░░░░        
@@ -19,0 +21 @@                                                                 
                                           21  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -20,0 +23,8 @@                                                               
                                           23  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░ 
                                           24  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                                           25  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                                           26  + ░░░░░░░░░░░░░░                 
                                           27  + ░░░░░░░░░░░░░░░░░░░░░░░░       
                                           28  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                                           29  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                                           30  + ░░░░░░░░░░░░░░                 
@@ -22,2 +32,2 @@                                                               
   22  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   32  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   23  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   33  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -26,6 +36,2 @@                                                               
   26  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   36  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   27  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   37  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   28  - ░░░░░░░░░░░░░░                                                         
   29  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░                                           
   30  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                                        
   31  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░                                        
   32                                      38                                   
"
`;

exports[`syntaxHighlighted commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    ░░░░░░░░░░░░░░░░░░░░░░░░░░         9    ░░░░░░░░░░░░░░░░░░░░░░░░░░     
                                           10  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   10    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   11    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   11                                      12                                   
"
`;

exports[`syntaxHighlighted commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`syntaxHighlighted diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  - This is file1                                                          
    2    No newline at end of file          1    No newline at end of file      
                                            2  + This is file1                  
                                            3  + Experimental change            
────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
                                            1  + All good                       
    1    This is file2                      2    This is file2                  
"
`;

exports[`syntaxHighlighted empty 1`] = `
"
"
`;

exports[`syntaxHighlighted merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                 
Merge: 2439767601 fbcdb8cf4f                                                    
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                        
Date:   Thu Dec 21 17:57:42 2023 -0800                                          
                                                                                
    Merge branch 'main' into gabritto/d2                                        
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                      
────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                            
  137    ░░░░░░░░░░░░       136    ░░░░░░░░░░░░       137    ░░░░░░░░░░░░     
  138    ░░░░░░░░░░░░░░░░░  137    ░░░░░░░░░░░░░░░░░  138    ░░░░░░░░░░░░░░░░░
  139    ░░░░░░░░░░░░░░░░░  138    ░░░░░░░░░░░░░░░░░  139    ░░░░░░░░░░░░░░░░░
                            139  + ░░░░░░░░░░░░░░░░░  140  + ░░░░░░░░░░░░░░░░░
  140    ░░░░░░░░░░░░░░░░░  140    ░░░░░░░░░░░░░░░░░  141    ░░░░░░░░░░░░░░░░░
  141    ░░░░░░░░░░░░░░░░░  141    ░░░░░░░░░░░░░░░░░  142    ░░░░░░░░░░░░░░░░░
  142  + ░░░░░░░░░░░░░░░░░                            143  + ░░░░░░░░░░░░░░░░░
  143    ░░░░░░░░░░░░░░░░░  142    ░░░░░░░░░░░░░░░░░  144    ░░░░░░░░░░░░░░░░░
  144    ░░░░░░░░░░░░░░░░   143    ░░░░░░░░░░░░░░░░   145    ░░░░░░░░░░░░░░░░ 
  145    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                       
────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                      
 5985    ░░░░░░░░░░░░░░░░░ 6063    ░░░░░░░░░░░░░░░░░ 6063    ░░░░░░░░░░░░░░░░░
 5986    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
 5987    ░░░░░░░░░░░░░░░░░ 6065    ░░░░░░░░░░░░░░░░░ 6065    ░░░░░░░░░░░░░░░░░
 5988  - ░░░░░░░░░░░░░░░░░                           6066  - ░░░░░░░░░░░░░░░░░
 5988  + ░░░░░░░░░░░░░░░░░                           6066  + ░░░░░░░░░░░░░░░░░
                           6066  + ░░░░░░░░░░░░░░░░░ 6067  + ░░░░░░░░░░░░░░░░░
 5989    ░░░░░░░░░░░░░░░░░ 6067    ░░░░░░░░░░░░░░░░░ 6068    ░░░░░░░░░░░░░░░░░
 5990    ░                 6068    ░                 6069    ░                
"
`;

exports[`syntaxHighlighted merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                 
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                         
Author: Andy Hanson <anhans@microsoft.com>                                      
Date:   Thu Sep 1 12:52:42 2016 -0700                                           
                                                                                
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into c
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                    
────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                      
 2788    ░░░░░░░░░░░ 2792    ░░░░░░░░░░░ 2788    ░░░░░░░░░░░ 2792    ░░░░░░░░░░░
 2789    ░░░░░       2793    ░░░░░       2789    ░░░░░       2793    ░░░░░      
 2790                2794                2790                2794               
 2791  + ░░░░░░░░░░░                     2791  + ░░░░░░░░░░░ 2795  + ░░░░░░░░░░░
 2792  + ░░░░░░░░░░░                     2792  + ░░░░░░░░░░░ 2796  + ░░░░░░░░░░░
 2793  + ░░░░░                           2793  + ░░░░░       2797  + ░░░░░      
 2794  +                                 2794  +             2798  +            
                                         2795  - ░░░░░░░░░░░ 2799  - ░░░░░░░░░░░
                                         2796  - ░░░░░░░░░░░ 2800  - ░░░░░░░░░░░
                                                             2799  + ░░░░░░░░░░░
                                                             2800  + ░░░░░░░░░░░
                                                             2801  + ░░░░░░░░░░░
                                         2795  + ░░░░░       2802  + ░░░░░      
                                         2796  +             2803  +            
 2795    ░░░░░░░░░░░ 2795    ░░░░░░░░░░░ 2797    ░░░░░░░░░░░ 2804    ░░░░░░░░░░░
                     2796  - ░░░░░░░░░░░                     2805  - ░░░░░░░░░░░
                     2797  - ░░░░░░░░░░░                     2806  - ░░░░░░░░░░░
                     2798  - ░░░░░░░░░                       2807  - ░░░░░░░░░  
                                         2798  - ░░░░░░░░░░░ 2808  - ░░░░░░░░░░░
                     2799  - ░░░░░░░░░░░ 2799  - ░░░░░░░░░░░ 2809  - ░░░░░░░░░░░
 2796  + ░░░░░░░░░░░                                         2805  + ░░░░░░░░░░░
 2797    ░░░░░       2800    ░░░░░       2800    ░░░░░       2806    ░░░░░      
 2798                2801                2801                2807               
 2799    ░░░░░░░░░░░ 2802    ░░░░░░░░░░░ 2802    ░░░░░░░░░░░ 2808    ░░░░░░░░░░░
                     2803  - ░░░░░░░░░░░                     2809  - ░░░░░░░░░░░
                     2804  - ░░░░░░░░░░░                     2810  - ░░░░░░░░░░░
                     2805  - ░░░░░░░░░                       2811  - ░░░░░░░░░  
                                         2803  - ░░░░░░░░░░░ 2812  - ░░░░░░░░░░░
                     2806  - ░░░░░░░░░░░ 2804  - ░░░░░░░░░░░ 2813  - ░░░░░░░░░░░
 2800  + ░░░░░░░░░░░                                         2809  + ░░░░░░░░░░░
 2801  + ░░░░░                                               2810  + ░░░░░      
 2802  +                                                     2811  +            
 2803  + ░░░░░░░░░░░                                         2812  + ░░░░░░░░░░░
 2804  + ░░░░░░░░░░░                                         2813  + ░░░░░░░░░░░
 2805  + ░░░░░░░░░░░                                         2814  + ░░░░░░░░░░░
 2806  + ░░░░░                                               2815  + ░░░░░      
 2807  +                                                     2816  +            
 2808  - ░░░░░░░░░░░                                         2817  - ░░░░░░░░░░░
 2809  - ░░░░░░░░░░░                                         2818  - ░░░░░░░░░░░
 2810  - ░░░░░░░░░░░                                         2819  - ░░░░░░░░░░░
                                                             2817  + ░░░░░░░░░░░
                                                             2818  + ░░░░░░░░░░░
                                         2801  + ░░░░░       2819  + ░░░░░      
                                         2802  +             2820  +            
                                         2803  + ░░░░░░░░░░░ 2821  + ░░░░░░░░░░░
                                         2804  + ░░░░░░░░░░░ 2822  + ░░░░░░░░░░░
                                         2805  + ░░░░░░░░░░░ 2823  + ░░░░░░░░░░░
                                         2806  + ░░░░░░░░░░░ 2824  + ░░░░░░░░░░░
                                         2807  + ░░░░░░░░░░░ 2825  + ░░░░░░░░░░░
                                         2808  + ░░░░░       2826  + ░░░░░      
                                         2809  +             2827  +            
                                         2810  + ░░░░░░░░░░░ 2828  + ░░░░░░░░░░░
                                         2811  + ░░░░░░░░░░░ 2829  + ░░░░░░░░░░░
                                         2812  + ░░░░░░░░░░░ 2830  + ░░░░░░░░░░░
 2811    ░░░░░       2807    ░░░░░       2813    ░░░░░       2831    ░░░░░      
 2812                2808                2814                2832               
 2813    ░░░░░░░░░░░ 2809    ░░░░░░░░░░░ 2815    ░░░░░░░░░░░ 2833    ░░░░░░░░░░░
 2814                2810                2816                2834               
"
`;

exports[`syntaxHighlighted multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1    ░░░░░░░░░░░░░░░░░░░░░░░░░░         1    ░░░░░░░░░░░░░░░░░░░░░░░░░░     
    2    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    2    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
                                            3  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░   
    3    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    4    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    4    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    5    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    5    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    6    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -12,15 +13,16 @@ function main() {                                           
   12    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   13    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   13    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   14                                      15                                   
   15  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   16  + ░░░░░░░░░░░░░░░░░░░░           
   16  - ░░░░░░░░░░░░░░░░░░░░░░            17  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   17  - ░░░░░░░░░                         18  + ░░░░░░░░░░░░░░░░░░░░░░░░░░     
   18    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   19    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   19    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   20    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   20    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   21  - ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░     22  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░   
   22  - ░░░░░░░░░░                        23  + ░░░░░░░░░░                     
   23  - ░░░░░░░░░░░░░░░░░░░░░░            24  + ░░░░░░░░░░░░░░░░░░░░░░░        
                                           25  + ░░░░░░░░░░░░░░░░░░░░░          
   24    ░░░░░░                            26    ░░░░░░                         
   25    ░                                 27    ░                              
   26    ░░░░░░░                           28    ░░░░░░░                        
"
`;

exports[`syntaxHighlighted with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    7    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    8    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    8    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
    9    ░░░░░░░░░░░░░░░░░░░░░              9    ░░░░░░░░░░░░░░░░░░░░░          
                                           10  + ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   10    ░░░░░░░░░░░░░░░░░░░░░░░░░░        11    ░░░░░░░░░░░░░░░░░░░░░░░░░░     
   11    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   12    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   12    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░   13    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   13                                      14                                   
   14                                      15                                   
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                                                           
   20  + brew 'sonos'                                                           
   20    brew 'terminal-notifier'                                               
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                                                           
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                                                         
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                                                           
   20  + brew 'sonos'                                                           
   20    brew 'terminal-notifier'                                               
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                                                           
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                                                         
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -   [x] Organize code                                                  
   10  + -   [x] Move visual config to theme                                    
   10    -   [ ] Handle empty diffs                                             
   11                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                             
────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                     
    4  - このリポジトリは、MS-DOS ░░░░░░及び MS-DOS v2.0 のオリジナルのソースコード及びコンパイルされたバイナリを含んでいます
    4  + このリポジトリは、MS-DOS 及び MS-DOS v2.0 のオリジナルのソースコード及びコンパイルされたバイナリを含んでいます。
    5                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
    1  + node_modules/**                                                        
    2  + build/**                                                               
                                                                                
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 18 03:17:05 2021 -0700                                          
                                                                                
    Update main.yml                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■                                                                             
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                 
    1  - on run argv                                                            
    2  -     with timeout of 5 seconds                                          
    3  -         tell app "Terminal"                                            
    4  -             open "screenshots.sh"                                      
    5  -         end tell                                                       
    6  -     end timeout                                                        
    7  - end run                                                                
    8    No newline at end of file                                              
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5  -         "revision": ░░░░                                               
    5  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░         
@@ -8 +8 @@                                                                     
    8  -         "revision": ░░░░                                               
    8  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░         
@@ -11 +11 @@                                                                   
   11  -         "revision": ░░░░                                               
   11  +         "revision": ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░         
@@ -16 +16 @@                                                                   
   16  -         "version": "1.░░.░░░",                                         
   16  +         "version": "1.░░.░",                                           
@@ -17,0 +18 @@                                                                 
   18  +           "rebuild": 0,                                                
@@ -19,0 +21 @@                                                                 
   21  +           "root_url": "https://homebrew.bintray.com/bottles",          
@@ -20,0 +23,8 @@                                                               
   23  +             "arm64_big_sur": {                                         
   24  +               "url": "https://homebrew.bintray.com/bottles/go-1.16.3.ar
   25  +               "sha256": "e7c1efdd09e951eb46d01a3200b01e7fa55ce285b75470
   26  +             },                                                         
   27  +             "big_sur": {                                               
   28  +               "url": "https://homebrew.bintray.com/bottles/go-1.16.3.bi
   29  +               "sha256": "ea37f33fd27369612a3e4e6db6adc46db0e8bdf6fac133
   30  +             },                                                         
@@ -22,2 +32,2 @@                                                               
   22  -               "url": "https://homebrew.bintray.com/bottles/go-1.░░.░░░.
   23  -               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   32  +               "url": "https://homebrew.bintray.com/bottles/go-1.░░.░.ca
   33  +               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
@@ -26,6 +36,2 @@                                                               
   26  -               "url": "https://homebrew.bintray.com/bottles/go-1.░░.░░░.
   27  -               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   28  -             },                                                         
   29  -             "high_sierra": {                                           
   30  -               "url": "https://homebrew.bintray.com/bottles/go-1.14.2_1.
   31  -               "sha256": "0997f6f5cda0e3bdb7789a80b53621cb588202ab37fd89
   36  +               "url": "https://homebrew.bintray.com/bottles/go-1.░░.░.mo
   37  +               "sha256": "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
   32                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -        [x] Organize code                                             
   10  + -        [x] Move visual config to theme                               
   10    -        [ ] Handle empty diffs                                        
   11                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`unifiedWithInlineChangesHighlighted diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  - This is file1                                                          
    2    No newline at end of file                                              
    2  + This is file1                                                          
    3  + Experimental change                                                    
────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  + All good                                                               
    1    This is file2                                                          
"
`;

exports[`unifiedWithInlineChangesHighlighted empty 1`] = `
"
"
`;

exports[`unifiedWithInlineChangesHighlighted merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                 
Merge: 2439767601 fbcdb8cf4f                                                    
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                        
Date:   Thu Dec 21 17:57:42 2023 -0800                                          
                                                                                
    Merge branch 'main' into gabritto/d2                                        
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                      
────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                            
  137        isBlock,                                                           
  138        isBlockOrCatchScoped,                                              
  139        IsBlockScopedContainer,                                            
  140  +     isBooleanLiteral,                                                  
  141        isCallExpression,                                                  
  142        isClassStaticBlockDeclaration,                                     
  143  +     isConditionalExpression,                                           
  144        isConditionalTypeNode,                                             
  145        IsContainer,                                                       
  146        isDeclaration,                                                     
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                       
────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                      
 6063        decoratorSignature?: Signature;     // Signature for decorator as i
 6064        spreadIndices?: { first: number | undefined, last: number | undefin
 6065        parameterInitializerContainsUndefined?: boolean; // True if this is
 6066  -     fakeScopeForSignatureDeclaration?: boolean; // True if this is a fa
 6066  +     contextualReturnType?: Type;        // If the node is a return stat
 6067  +     fakeScopeForSignatureDeclaration?: "params" | "typeParams"; // If p
 6068        assertionExpressionType?: Type;     // Cached type of the expressio
 6069    }                                                                      
"
`;

exports[`unifiedWithInlineChangesHighlighted merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                 
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                         
Author: Andy Hanson <anhans@microsoft.com>                                      
Date:   Thu Sep 1 12:52:42 2016 -0700                                           
                                                                                
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into c
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                    
────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                      
 2792            return node && node.parent && node.parent.kind === SyntaxKind.P
 2793        }                                                                  
 2794                                                                           
 2795  +     function climbPastPropertyAccess(node: Node) {                     
 2796  +         return isRightSideOfPropertyAccess(node) ? node.parent : node; 
 2797  +     }                                                                  
 2798  +                                                                        
 2799  -     function climbPastManyPropertyAccesses(node: Node): Node {         
 2800  -         return isRightSideOfPropertyAccess(node) ? climbPastManyPropert
 2799  +     /** Get \`C\` given \`N\` if \`N\` is in the position \`class C extends N\`
 2800  +     function tryGetClassExtendingIdentifier(node: Node): ClassLikeDecla
 2801  +         return tryGetClassExtendingExpressionWithTypeArguments(climbPas
 2802  +     }                                                                  
 2803  +                                                                        
 2804        function isCallExpressionTarget(node: Node): boolean {             
 2805  -         if (isRightSideOfPropertyAccess(node)) {                       
 2806  -             node = node.parent;                                        
 2807  -         }                                                              
 2808  -         node = climbPastPropertyAccess(node);                          
 2809  -         return node && node.parent && node.parent.kind === SyntaxKind.C
 2805  +         return isCallOrNewExpressionTarget(node, SyntaxKind.CallExpress
 2806        }                                                                  
 2807                                                                           
 2808        function isNewExpressionTarget(node: Node): boolean {              
 2809  -         if (isRightSideOfPropertyAccess(node)) {                       
 2810  -             node = node.parent;                                        
 2811  -         }                                                              
 2812  -         node = climbPastPropertyAccess(node);                          
 2813  -         return node && node.parent && node.parent.kind === SyntaxKind.N
 2809  +         return isCallOrNewExpressionTarget(node, SyntaxKind.NewExpressi
 2810  +     }                                                                  
 2811  +                                                                        
 2812  +     function isCallOrNewExpressionTarget(node: Node, kind: SyntaxKind) 
 2813  +         const target = climbPastPropertyAccess(node);                  
 2814  +         return target && target.parent && target.parent.kind === kind &
 2815  +     }                                                                  
 2816  +                                                                        
 2817  -     /** Get \`C\` given \`N\` if \`N\` is in the position \`class C extends N\`
 2818  -     function tryGetClassExtendingIdentifier(node: Node): ClassLikeDecla
 2819  -         return tryGetClassExtendingExpressionWithTypeArguments(climbPas
 2817  +     function climbPastManyPropertyAccesses(node: Node): Node {         
 2818  +         return isRightSideOfPropertyAccess(node) ? climbPastManyPropert
 2819  +     }                                                                  
 2820  +                                                                        
 2821  +     /** Returns a CallLikeExpression where \`node\` is the target being i
 2822  +     function getAncestorCallLikeExpression(node: Node): CallLikeExpress
 2823  +         const target = climbPastManyPropertyAccesses(node);            
 2824  +         const callLike = target.parent;                                
 2825  +         return callLike && isCallLikeExpression(callLike) && getInvoked
 2826  +     }                                                                  
 2827  +                                                                        
 2828  +     function tryGetSignatureDeclaration(typeChecker: TypeChecker, node:
 2829  +         const callLike = getAncestorCallLikeExpression(node);          
 2830  +         return callLike && typeChecker.getResolvedSignature(callLike).d
 2831        }                                                                  
 2832                                                                           
 2833        function isNameOfModuleDeclaration(node: Node) {                   
 2834                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1    import chalk from 'chalk';                                             
    2    import * as process from 'process';                                    
    3  + import stream from 'stream';                                           
    3    import terminalSize from 'terminal-size';                              
    4    import { iterlinesFromReadableAsync } from './iterLinesFromReadable';  
    5    import { iterLinesWithoutAnsiColors } from './iterLinesWithoutAnsiColor
@@ -12,15 +13,16 @@ function main() {                                           
   12        const screenWidth = terminalSize().columns;                        
   13        const theme = defaultTheme(chalk, screenWidth);                    
   14                                                                           
   15  -     transformStreamWithIterables(                                      
   16  -         process.stdin,                                                 
   17  -         [                                                              
   16  +     stream.pipeline(                                                   
   17  +         transformStreamWithIterables(                                  
   18  +             process.stdin,                                             
   18                iterlinesFromReadableAsync,                                
   19                iterLinesWithoutAnsiColors,                                
   20                iterSideBySideDiff(theme),                                 
   21  -             iterWithNewlines░                                          
   22  -         ░,                                                             
   23  -         process.stdout                                                 
   22  +             iterWithNewlines                                           
   23  +         ░,                                                             
   24  +         process.stdout░                                                
   25  +         console.error                                                  
   24        );                                                                 
   25    }                                                                      
   26                                                                           
"
`;

exports[`unifiedWithInlineChangesHighlighted with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7    -   [x] Handle file addition/deletion properly                         
    8    -   [x] Fix incorrect line positions when a hunk has discontinuous inse
    9    -   [x] Organize code                                                  
   10  + -   [x] Move visual config to theme                                    
   10    -   [ ] Handle empty diffs                                             
   11    -   [ ] Handle moves and renames without diffs                         
   12    -   [ ] Highlight changes in lines                                     
   13                                                                           
   14                                                                           
"
`;

exports[`unifiedWithWrapping commit with a small diff 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                                                           
   20  + brew 'sonos'                                                           
   20    brew 'terminal-notifier'                                               
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                                                           
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                                                         
"
`;

exports[`unifiedWithWrapping commit with a small diff without a/ and b/ prefixs 1`] = `
"
commit 26ca49fb83758bace20a473e231d576aa1bbe115                                 
Author: Shrey Banga <shrey@quip.com>                                            
Date:   Tue May 23 16:47:17 2017 -0700                                          
                                                                                
    sonos to brew                                                               
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile                                                                    
────────────────────────────────────────────────────────────────────────────────
@@ -19,2 +19,3 @@ brew 'python3'                                                
   19    brew 'socat'                                                           
   20  + brew 'sonos'                                                           
   20    brew 'terminal-notifier'                                               
@@ -42,3 +43,2 @@ cask 'rescuetime'                                             
   42    cask 'slate'                                                           
   43  - cask 'sonos'                                                           
   44    cask 'spotify'                                                         
"
`;

exports[`unifiedWithWrapping commit with addition 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -   [x] Organize code                                                  
   10  + -   [x] Move visual config to theme                                    
   10    -   [ ] Handle empty diffs                                             
   11                                                                           
"
`;

exports[`unifiedWithWrapping commit with binary file addition 1`] = `
"
commit c0ca4394fd55f1709430414f03db3d04cb9cc72c (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Wed Apr 14 18:24:29 2021 -0700                                          
                                                                                
    test binary file addition                                                   
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ screenshots/default.png                                                     
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ test dir a/default.png                                                      
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`unifiedWithWrapping commit with deletion 1`] = `
"commit eccfb5a2b3d76ba53df315f977da74b18d50113e
Author: Shrey Banga <shrey@quip.com>
Date:   Thu Aug 22 10:07:25 2019 -0700

    Remove deprecated option

diff --git a/Code/User/settings.json b/Code/User/settings.json
index a33d267..ae58a01 100644
--- a/Code/User/settings.json
+++ b/Code/User/settings.json
@@ -26,5 +26,4 @@
   // search
   "search.location": "panel",
-  "search.usePCRE2": true,

   // telemetry
"
`;

exports[`unifiedWithWrapping commit with double-spaced characters 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ README.ja-JP.md                                                             
────────────────────────────────────────────────────────────────────────────────
@@ -4 +4 @@                                                                     
    4  - このリポジトリは、MS-DOS v1.25 及び MS-DOS v2.0                        
         のオリジナルのソースコード及びコンパイルされたバイナリを含んでいます。 
                                                                                
    4  + このリポジトリは、MS-DOS 及び MS-DOS v2.0                              
         のオリジナルのソースコード及びコンパイルされたバイナリを含んでいます。 
                                                                                
    5                                                                           
"
`;

exports[`unifiedWithWrapping commit with file addition 1`] = `
"
commit e4951eee3b9a8fa471d01dd64075c5fd44879a26                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 14:35:42 2021 -0700                                          
                                                                                
    wip                                                                         
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ .gitignore                                                                  
────────────────────────────────────────────────────────────────────────────────
@@ -0,0 +1,2 @@                                                                 
    1  + node_modules/**                                                        
    2  + build/**                                                               
                                                                                
"
`;

exports[`unifiedWithWrapping commit with file deletion 1`] = `
"
commit 1e6ebaccc6fadf3390a749e7aa2cc6372b24325e                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 18 03:17:05 2021 -0700                                          
                                                                                
    Update main.yml                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■                                                                             
────────────────────────────────────────────────────────────────────────────────
────────────────────────────────────────────────────────────────────────────────
 ■■ scripts/screenshotTheme                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -1,7 +0,0 @@                                                                 
    1  - on run argv                                                            
    2  -     with timeout of 5 seconds                                          
    3  -         tell app "Terminal"                                            
    4  -             open "screenshots.sh"                                      
    5  -         end tell                                                       
    6  -     end timeout                                                        
    7  - end run                                                                
    8    No newline at end of file                                              
"
`;

exports[`unifiedWithWrapping commit with file move 1`] = `
"
commit 1c76ed4bb05429741fd4a48896bb84b11bc661f5                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sat Apr 10 22:26:15 2021 -0700                                          
                                                                                
    Move sample diff files                                                      
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ colors.diff -> test-data/colors.diff                                        
────────────────────────────────────────────────────────────────────────────────
"
`;

exports[`unifiedWithWrapping commit with inline line changes 1`] = `
"
commit 9e424d329800e945e3003c9e275f80bdef69e591                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 4 19:04:26 2021 -0700                                           
                                                                                
    update lockfile                                                             
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ Brewfile.lock.json                                                          
────────────────────────────────────────────────────────────────────────────────
@@ -5 +5 @@                                                                     
    5  -         "revision": null                                               
    5  +         "revision": "ee2f8d3ba2976e50ef577d517bf175c94fbbb0dd"         
@@ -8 +8 @@                                                                     
    8  -         "revision": null                                               
    8  +         "revision": "c4cf96857c050dfa4f65f52109862dc68e55f60a"         
@@ -11 +11 @@                                                                   
   11  -         "revision": null                                               
   11  +         "revision": "504d4b93aa6eaf4fce1bf17c19f55828ad7229a4"         
@@ -16 +16 @@                                                                   
   16  -         "version": "1.14.2_1",                                         
   16  +         "version": "1.16.3",                                           
@@ -17,0 +18 @@                                                                 
   18  +           "rebuild": 0,                                                
@@ -19,0 +21 @@                                                                 
   21  +           "root_url": "https://homebrew.bintray.com/bottles",          
@@ -20,0 +23,8 @@                                                               
   23  +             "arm64_big_sur": {                                         
   24  +               "url": "https://homebrew.bintray.com/bottles/go-1.16.3.ar
         m64_big_sur.bottle.tar.gz",                                            
   25  +               "sha256":                                                
         "e7c1efdd09e951eb46d01a3200b01e7fa55ce285b75470051be7fef34f4233ce"     
   26  +             },                                                         
   27  +             "big_sur": {                                               
   28  +               "url":                                                   
         "https://homebrew.bintray.com/bottles/go-1.16.3.big_sur.bottle.tar.gz",
   29  +               "sha256":                                                
         "ea37f33fd27369612a3e4e6db6adc46db0e8bdf6fac1332bf51bafaa66d43969"     
   30  +             },                                                         
@@ -22,2 +32,2 @@                                                               
   22  -               "url": "https://homebrew.bintray.com/bottles/go-1.14.2_1.
         catalina.bottle.tar.gz",                                               
   23  -               "sha256":                                                
         "15b5623471330edcc681d7f9d57b449660e6d4b98c7f67af67f4991fc75d61fc"     
   32  +               "url": "https://homebrew.bintray.com/bottles/go-1.16.3.ca
         talina.bottle.tar.gz",                                                 
   33  +               "sha256":                                                
         "69c28f5e60612801c66e51e93d32068f822b245ab83246cb6cb374572eb59e15"     
@@ -26,6 +36,2 @@                                                               
   26  -               "url": "https://homebrew.bintray.com/bottles/go-1.14.2_1.
         mojave.bottle.tar.gz",                                                 
   27  -               "sha256":                                                
         "fa65e7dabe514e65ae625ed3c84a6bf58df01aceffc6e9aa99752ca8c320ce69"     
   28  -             },                                                         
   29  -             "high_sierra": {                                           
   30  -               "url": "https://homebrew.bintray.com/bottles/go-1.14.2_1.
         high_sierra.bottle.tar.gz",                                            
   31  -               "sha256":                                                
         "0997f6f5cda0e3bdb7789a80b53621cb588202ab37fd89bcd269f8dfafd23351"     
   36  +               "url":                                                   
         "https://homebrew.bintray.com/bottles/go-1.16.3.mojave.bottle.tar.gz", 
   37  +               "sha256":                                                
         "bf1e90ed1680b8ee1acb49f2f99426c8a8ac3e49efd63c7f3b41e57e7214dd19"     
   32                                                                           
"
`;

exports[`unifiedWithWrapping commit with tabs 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -9,2 +9,3 @@                                                                 
    9    -        [x] Organize code                                             
   10  + -        [x] Move visual config to theme                               
   10    -        [ ] Handle empty diffs                                        
   11                                                                           
"
`;

exports[`unifiedWithWrapping commits without diffs 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717 (HEAD -> main)                  
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
commit b637f38029f4a89c6a3b73b2b84a6a5b9e260730                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 11:53:02 2021 -0700                                          
                                                                                
    Organize code                                                               
                                                                                
commit f323143e03af95fee5d38c21238a92ffd4461847                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 10:39:17 2021 -0700                                          
                                                                                
    more todos                                                                  
                                                                                
"
`;

exports[`unifiedWithWrapping diff from issue #50 1`] = `
"
────────────────────────────────────────────────────────────────────────────────
 ■■ file1                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  - This is file1                                                          
    2    No newline at end of file                                              
    2  + This is file1                                                          
    3  + Experimental change                                                    
────────────────────────────────────────────────────────────────────────────────
 ■■ file2                                                                       
────────────────────────────────────────────────────────────────────────────────
@@ -1 +1,2 @@                                                                   
    1  + All good                                                               
    1    This is file2                                                          
"
`;

exports[`unifiedWithWrapping empty 1`] = `
"
"
`;

exports[`unifiedWithWrapping merge commit with 2 parents 1`] = `
"
commit 3f504f4fbc1caf9c10814d48d8897a34f8a34dec                                 
Merge: 2439767601 fbcdb8cf4f                                                    
Author: Gabriela Araujo Britto <gabrielaa@microsoft.com>                        
Date:   Thu Dec 21 17:57:42 2023 -0800                                          
                                                                                
    Merge branch 'main' into gabritto/d2                                        
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/binder.ts                                                      
────────────────────────────────────────────────────────────────────────────────
@@@ -137,9 -136,9 +137,10 @@@ import                                            
  137        isBlock,                                                           
  138        isBlockOrCatchScoped,                                              
  139        IsBlockScopedContainer,                                            
  140  +     isBooleanLiteral,                                                  
  141        isCallExpression,                                                  
  142        isClassStaticBlockDeclaration,                                     
  143  +     isConditionalExpression,                                           
  144        isConditionalTypeNode,                                             
  145        IsContainer,                                                       
  146        isDeclaration,                                                     
────────────────────────────────────────────────────────────────────────────────
 ■■ src/compiler/types.ts                                                       
────────────────────────────────────────────────────────────────────────────────
@@@ -5985,8 -6063,7 +6063,8 @@@ export interface NodeLinks                      
 6063        decoratorSignature?: Signature;     // Signature for decorator as  
         if invoked by the runtime.                                             
 6064        spreadIndices?: { first: number | undefined, last: number |        
         undefined }; // Indices of first and last spread elements in array     
         literal                                                                
 6065        parameterInitializerContainsUndefined?: boolean; // True if this is
          a parameter declaration whose type annotation contains "undefined".   
 6066  -     fakeScopeForSignatureDeclaration?: boolean; // True if this is a   
         fake scope injected into an enclosing declaration chain.               
 6066  +     contextualReturnType?: Type;        // If the node is a return     
         statement's expression, then this is the contextual return type.       
 6067  +     fakeScopeForSignatureDeclaration?: "params" | "typeParams"; // If  
         present, this is a fake scope injected into an enclosing declaration   
         chain.                                                                 
 6068        assertionExpressionType?: Type;     // Cached type of the          
         expression of a type assertion                                         
 6069    }                                                                      
"
`;

exports[`unifiedWithWrapping merge commit with 3 parents 1`] = `
"
commit d6d6a4aedfa78794c1b611c13d2ed1d3a66e1798                                 
Merge: 0dc976df1e 5f16a48236 3eadbf6c96                                         
Author: Andy Hanson <anhans@microsoft.com>                                      
Date:   Thu Sep 1 12:52:42 2016 -0700                                           
                                                                                
    Merge branch 'goto_definition_super', remote-tracking branch 'origin' into  
constructor_references                                                          
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/services/services.ts                                                    
────────────────────────────────────────────────────────────────────────────────
@@@@ -2788,26 -2792,18 -2788,34 +2792,42 @@@@ namespace ts                      
 2792            return node && node.parent && node.parent.kind ===             
         SyntaxKind.PropertyAccessExpression &&                                 
         (<PropertyAccessExpression>node.parent).name === node;                 
 2793        }                                                                  
 2794                                                                           
 2795  +     function climbPastPropertyAccess(node: Node) {                     
 2796  +         return isRightSideOfPropertyAccess(node) ? node.parent : node; 
 2797  +     }                                                                  
 2798  +                                                                        
 2799  -     function climbPastManyPropertyAccesses(node: Node): Node {         
 2800  -         return isRightSideOfPropertyAccess(node) ?                     
         climbPastManyPropertyAccesses(node.parent) : node;                     
 2799  +     /** Get \`C\` given \`N\` if \`N\` is in the position \`class C extends N\`
          or \`class C extends foo.N\` where \`N\` is an identifier. */             
 2800  +     function tryGetClassExtendingIdentifier(node: Node):               
         ClassLikeDeclaration | undefined {                                     
 2801  +         return tryGetClassExtendingExpressionWithTypeArguments(climbPas
         tPropertyAccess(node).parent);                                         
 2802  +     }                                                                  
 2803  +                                                                        
 2804        function isCallExpressionTarget(node: Node): boolean {             
 2805  -         if (isRightSideOfPropertyAccess(node)) {                       
 2806  -             node = node.parent;                                        
 2807  -         }                                                              
 2808  -         node = climbPastPropertyAccess(node);                          
 2809  -         return node && node.parent && node.parent.kind ===             
         SyntaxKind.CallExpression && (<CallExpression>node.parent).expression  
         === node;                                                              
 2805  +         return isCallOrNewExpressionTarget(node,                       
         SyntaxKind.CallExpression);                                            
 2806        }                                                                  
 2807                                                                           
 2808        function isNewExpressionTarget(node: Node): boolean {              
 2809  -         if (isRightSideOfPropertyAccess(node)) {                       
 2810  -             node = node.parent;                                        
 2811  -         }                                                              
 2812  -         node = climbPastPropertyAccess(node);                          
 2813  -         return node && node.parent && node.parent.kind ===             
         SyntaxKind.NewExpression && (<CallExpression>node.parent).expression   
         === node;                                                              
 2809  +         return isCallOrNewExpressionTarget(node,                       
         SyntaxKind.NewExpression);                                             
 2810  +     }                                                                  
 2811  +                                                                        
 2812  +     function isCallOrNewExpressionTarget(node: Node, kind: SyntaxKind) 
         {                                                                      
 2813  +         const target = climbPastPropertyAccess(node);                  
 2814  +         return target && target.parent && target.parent.kind === kind  
         && (<CallExpression>target.parent).expression === target;              
 2815  +     }                                                                  
 2816  +                                                                        
 2817  -     /** Get \`C\` given \`N\` if \`N\` is in the position \`class C extends N\`
          or \`class C extends foo.N\` where \`N\` is an identifier. */             
 2818  -     function tryGetClassExtendingIdentifier(node: Node):               
         ClassLikeDeclaration | undefined {                                     
 2819  -         return tryGetClassExtendingExpressionWithTypeArguments(climbPas
         tPropertyAccess(node).parent);                                         
 2817  +     function climbPastManyPropertyAccesses(node: Node): Node {         
 2818  +         return isRightSideOfPropertyAccess(node) ?                     
         climbPastManyPropertyAccesses(node.parent) : node;                     
 2819  +     }                                                                  
 2820  +                                                                        
 2821  +     /** Returns a CallLikeExpression where \`node\` is the target being  
         invoked. */                                                            
 2822  +     function getAncestorCallLikeExpression(node: Node):                
         CallLikeExpression | undefined {                                       
 2823  +         const target = climbPastManyPropertyAccesses(node);            
 2824  +         const callLike = target.parent;                                
 2825  +         return callLike && isCallLikeExpression(callLike) &&           
         getInvokedExpression(callLike) === target && callLike;                 
 2826  +     }                                                                  
 2827  +                                                                        
 2828  +     function tryGetSignatureDeclaration(typeChecker: TypeChecker, node:
          Node): SignatureDeclaration | undefined {                             
 2829  +         const callLike = getAncestorCallLikeExpression(node);          
 2830  +         return callLike &&                                             
         typeChecker.getResolvedSignature(callLike).declaration;                
 2831        }                                                                  
 2832                                                                           
 2833        function isNameOfModuleDeclaration(node: Node) {                   
 2834                                                                           
"
`;

exports[`unifiedWithWrapping multiple inserts and deletes in the same hunk 1`] = `
"
commit e5f896655402f8cf2d947c528d45e1d56bbf5717                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 16:23:54 2021 -0700                                          
                                                                                
    Small refactor to allow testing end-to-end                                  
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ src/index.ts                                                                
────────────────────────────────────────────────────────────────────────────────
@@ -1,5 +1,6 @@                                                                 
    1    import chalk from 'chalk';                                             
    2    import * as process from 'process';                                    
    3  + import stream from 'stream';                                           
    3    import terminalSize from 'terminal-size';                              
    4    import { iterlinesFromReadableAsync } from './iterLinesFromReadable';  
    5    import { iterLinesWithoutAnsiColors } from                             
         './iterLinesWithoutAnsiColors';                                        
@@ -12,15 +13,16 @@ function main() {                                           
   12        const screenWidth = terminalSize().columns;                        
   13        const theme = defaultTheme(chalk, screenWidth);                    
   14                                                                           
   15  -     transformStreamWithIterables(                                      
   16  -         process.stdin,                                                 
   17  -         [                                                              
   16  +     stream.pipeline(                                                   
   17  +         transformStreamWithIterables(                                  
   18  +             process.stdin,                                             
   18                iterlinesFromReadableAsync,                                
   19                iterLinesWithoutAnsiColors,                                
   20                iterSideBySideDiff(theme),                                 
   21  -             iterWithNewlines,                                          
   22  -         ],                                                             
   23  -         process.stdout                                                 
   22  +             iterWithNewlines                                           
   23  +         ),                                                             
   24  +         process.stdout,                                                
   25  +         console.error                                                  
   24        );                                                                 
   25    }                                                                      
   26                                                                           
"
`;

exports[`unifiedWithWrapping with ANSI color codes 1`] = `
"
commit f735de7025c6d626c5ae1a291fe24f143dea0313                                 
Author: Shrey Banga <banga.shrey@gmail.com>                                     
Date:   Sun Apr 11 15:25:34 2021 -0700                                          
                                                                                
    Add theme support                                                           
                                                                                
────────────────────────────────────────────────────────────────────────────────
 ■■ todo.md                                                                     
────────────────────────────────────────────────────────────────────────────────
@@ -7,6 +7,7 @@                                                                 
    7    -   [x] Handle file addition/deletion properly                         
    8    -   [x] Fix incorrect line positions when a hunk has discontinuous     
         inserts and/or deletes                                                 
    9    -   [x] Organize code                                                  
   10  + -   [x] Move visual config to theme                                    
   10    -   [ ] Handle empty diffs                                             
   11    -   [ ] Handle moves and renames without diffs                         
   12    -   [ ] Highlight changes in lines                                     
   13                                                                           
   14                                                                           
"
`;
